<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	xmlns:georss="http://www.georss.org/georss" xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#" xmlns:media="http://search.yahoo.com/mrss/"
	>

<channel>
	<title>bsd &#8211; Tutti per Linux</title>
	<atom:link href="https://tuttiperlinux.blog/tag/bsd/feed/" rel="self" type="application/rss+xml" />
	<link>https://tuttiperlinux.blog</link>
	<description>Tutto cio&#039; che avresti sempre voluto capire su Linux ed il mondo Digitale</description>
	<lastBuildDate>Sun, 30 Nov 2014 16:11:29 +0000</lastBuildDate>
	<language>it-IT</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>http://wordpress.com/</generator>
<cloud domain='tuttiperlinux.blog' port='80' path='/?rsscloud=notify' registerProcedure='' protocol='http-post' />
<image>
		<url>https://secure.gravatar.com/blavatar/fa5c4cf69896031d9ec71ff8d5aafd25?s=96&#038;d=https%3A%2F%2Fs0.wp.com%2Fi%2Fbuttonw-com.png</url>
		<title>bsd &#8211; Tutti per Linux</title>
		<link>https://tuttiperlinux.blog</link>
	</image>
	<atom:link rel="search" type="application/opensearchdescription+xml" href="https://tuttiperlinux.blog/osd.xml" title="Tutti per Linux" />
	<atom:link rel='hub' href='https://tuttiperlinux.blog/?pushpress=hub'/>
	<item>
		<title>Puppet: automatizziamo e gestiamo ogni task</title>
		<link>https://tuttiperlinux.blog/2014/11/30/puppet-automatizziamo-e-gestiamo-ogni-task/</link>
					<comments>https://tuttiperlinux.blog/2014/11/30/puppet-automatizziamo-e-gestiamo-ogni-task/#comments</comments>
		
		<dc:creator><![CDATA[Tutti per Linux]]></dc:creator>
		<pubDate>Sun, 30 Nov 2014 15:59:27 +0000</pubDate>
				<category><![CDATA[SysAdmin]]></category>
		<category><![CDATA[aix]]></category>
		<category><![CDATA[bashboard]]></category>
		<category><![CDATA[browser]]></category>
		<category><![CDATA[bsd]]></category>
		<category><![CDATA[certificato]]></category>
		<category><![CDATA[linux blog]]></category>
		<category><![CDATA[puppet]]></category>
		<category><![CDATA[puppetlabs]]></category>
		<category><![CDATA[ruby]]></category>
		<category><![CDATA[solaris]]></category>
		<category><![CDATA[ubuntu blog]]></category>
		<category><![CDATA[virtual machine]]></category>
		<guid isPermaLink="false">http://tuttiperlinux.com/?p=708</guid>

					<description><![CDATA[Introduzione a Puppet Puppet è un software open source, scritto in linguaggio Ruby, che permette la gestione automatizzata e centralizzata di un&#8217;infrastruttura di sistemi Linux e Unix, essendo disponibile per tutte le principali distribuzioni Linux, ma anche per le diverse varianti di BSD oltre che Solaris e AIX. Con Puppet è possibile gestire praticamente ogni &#8230; <a href="https://tuttiperlinux.blog/2014/11/30/puppet-automatizziamo-e-gestiamo-ogni-task/">Continua a leggere <span class="meta-nav">&#8594;</span></a>]]></description>
										<content:encoded><![CDATA[<div data-shortcode="caption" id="attachment_716" style="width: 274px" class="wp-caption alignleft"><a href="https://tuttiperlinux.files.wordpress.com/2014/11/puppetlabs.png"><img loading="lazy" aria-describedby="caption-attachment-716" data-attachment-id="716" data-permalink="https://tuttiperlinux.blog/2014/11/30/puppet-automatizziamo-e-gestiamo-ogni-task/puppetlabs/#main" data-orig-file="https://tuttiperlinux.files.wordpress.com/2014/11/puppetlabs.png" data-orig-size="275,275" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="puppetlabs" data-image-description="" data-image-caption="&lt;p&gt;Puppet Labs&lt;/p&gt;
" data-medium-file="https://tuttiperlinux.files.wordpress.com/2014/11/puppetlabs.png?w=275" data-large-file="https://tuttiperlinux.files.wordpress.com/2014/11/puppetlabs.png?w=275" class=" wp-image-716" src="https://tuttiperlinux.files.wordpress.com/2014/11/puppetlabs.png?w=264&#038;h=264" alt="Puppet Labs" width="264" height="264" srcset="https://tuttiperlinux.files.wordpress.com/2014/11/puppetlabs.png?w=264&amp;h=264 264w, https://tuttiperlinux.files.wordpress.com/2014/11/puppetlabs.png?w=150&amp;h=150 150w, https://tuttiperlinux.files.wordpress.com/2014/11/puppetlabs.png 275w" sizes="(max-width: 264px) 100vw, 264px" /></a><p id="caption-attachment-716" class="wp-caption-text">Puppet Labs</p></div>
<h4><strong>Introduzione a Puppet</strong></h4>
<p>Puppet è un software open source, scritto in linguaggio Ruby, che permette la gestione automatizzata e centralizzata di un&#8217;infrastruttura di sistemi Linux e Unix, essendo disponibile per tutte le principali distribuzioni Linux, ma anche per le diverse varianti di BSD oltre che Solaris e AIX.</p>
<p>Con Puppet è possibile gestire praticamente ogni risorsa di un sistema: programmi da insallare, servizi da avviare, file di configurazione con contenuti diversi a seconda di diverse logiche, utenti, cron jobs, mount point, esecuzione di comandi specifici ecc.<br />
Praticamente permette di automatizzare ogni attività sistemistica cambiando di fatto il modo con sui si opera su sun server.</p>
<p>La logica di Puppet è di definire lo stato di un sistema e fare in modo che questo sia tale ogni volta che il client Puppet viene eseguito.<br />
La prima volta che lo si esegue, vengono installati pacchetti, avviati servizi, modificati file di configurazione secondo quanto definito sul <strong>PuppetMaster,</strong> le volte successive, se non sono intervenute modifiche manuali sul sistema, o cambiamenti delle configurazioni sul master, non dovrebbe cambiare nulla, altrimenti verranno upgradati eventuali file di configurazione o servizi, cosi come indicato sul PuppetMaster.<br />
Questo è un concetto importante per il sistemista, e&#8217; un vero e proprio cambio di paradigma sul suo modo di operare, poiche&#8217; in un sistema gestito con Puppet non si devono modificare a mano i file che Puppet gestisce, perchè questi vengono aggiornati al successivo collegamento/verifica con il Master e, visto che nelle condizioni ideali, Puppet gestisce tutte le risorse di un sistema (non è obbligatorio che sia così, ma è comunque consigliabile), di fatto, salvo in casi di emergenza, un sistemista non dovrà mai intervenire a mano sui suoi server.</p>
<p>Se da un lato tutto questo può risultare laborioso e in qualche modo &#8220;innaturale&#8221; nella gestione dall&#8217;altro comporta una serie di <strong>vantaggi clamorosi</strong>:<br />
&#8211; Si può configurare il profilo di un server ed applicarlo a decine o centinaia di host, tutti uguali, tutti allineati, tutti configurati con la stessa logica.<br />
&#8211; La procedura di setup e configurazione di un sistema è riproducibile, evitando cosi&#8217; di trovarsi a gestire dei sistemi che poi non si sanno più reinstallare.<br />
&#8211; E&#8217; facile e quasi intrinseco prevedere per ogni host il suo corrispettivo di sviluppo, collaudo e produzione, non avendo limiti nel numero di ambienti previsti e avendo la certezza di avere i sistemi fra di loro allineati.<br />
&#8211; I manifest di puppet sono generalmente gestiti con un sistema di versioning (git, subversion, cvs vanno tutti bene), questo comporta automaticamente una gestione formale, reversibile, documentata e tracciata delle modifiche fatte sui sistemi.</p>
<p>Il risultato è che, già in infrastrutture di qualche decine di host, Puppet diventa uno strumento unico e insostituibile per una gestione rapida ed efficace del parco macchine, lo sforzo inizlae di definizione delle sue configurazioni viene ampiamente ripagato nel tempo con tempi di gestione e setup dei sistemi enormemente ridotti.<br />
Insomma, con Puppet ci si può dedicare al miglioramento e l&#8217;affinamento della propria infrastruttura risparmiando il tempo speso in attività ordinarie ripetitive e noiose.</p>
<p>Per chi volesse provare le potenzialita&#8217; di Puppet oggi e&#8217; possibile scaricare una versione Free Trial direttamente dal sito del produttore [<a href="http://puppetlabs.com/download-puppet-enterprise">To try Puppet Enterprise for free on up to 10 nodes</a>].<br />
Vi verranno richieste soltanto alcune informazioni formali, prima di poter ottenere il file installabile per la versione della nostra distro (sia 32 che 64 bit).<br />
Potrete cosi&#8217; scaricare il pacchetto puppet-&lt;vostra versione&gt;.tar.gz sul vostro Puppet Server; una volta estratto il contenuto del file, ad esempio sotto <strong>/opt </strong>, per lanciare l&#8217;installazione del pacchetto vi bastera&#8217; lanciare lo script :</p>
<pre>cd /opt/puppet

# sudo ./puppet-enterprise-installer</pre>
<p>L&#8217;installazione procedera&#8217; sostanzialmente da sola, all&#8217;inizio ci verra&#8217; soltanto chiesta la conferma (premendo <strong>Y</strong> ) per avviare il processo d&#8217;installazione e copia dei file necessari, dopodiche&#8217; bastera&#8217; avere un po&#8217; di pazienza.</p>
<p>Altrimenti e&#8217; possibile questa ulteriore strada (ad esempio per un sistema Ubuntu 14.x)</p>
<pre class="prettyprint"><code><span class="pln">wget https</span><span class="pun">:</span><span class="com">//apt.puppetlabs.com/puppetlabs-release-trusty.deb
</span></code><span class="pln">sudo gdebi</span><span class="pln"> puppetlabs</span><span class="pun">-</span><span class="pln">release</span><span class="pun">-</span><span class="pln">trusty</span><span class="pun">.</span><span class="pln">deb 
</span><span class="pln">sudo apt</span><span class="pun">-</span><span class="kwd">get</span><span class="pln"> update 
</span><span class="pln">sudo aptitude install puppet</span><span class="pun">-</span><span class="pln">common</span><span class="pun">=</span><span class="lit">3.7</span><span class="pun">.3</span><span class="pun">-</span><span class="lit">1puppetlabs1</span><span class="pln"> puppet</span><span class="pun">=</span><span class="lit">3.7</span><span class="pun">.3</span><span class="pun">-</span><span class="lit">1puppetlabs1
sudo apt-get install puppetmaster-passenger</span></pre>
<p>Nel caso in cui invece dobbiate solo fare un upgrade all&#8217;ultima versione vi bastera&#8217; eseguire :</p>
<pre>$ sudo apt-get update
$ sudo puppet resource package puppetmaster ensure=latest</pre>
<p>Se poi non avete il tempo da impiegare nell&#8217;installazione, ma non volete perdere l&#8217;occasione di testare un prodotto cosi interessante potete anche scaricare una VM gia pronta al seguente link <a href="http://puppetlabs.com/download-learning-vm">puppetlabs_VM</a></p>
<h4><strong>Configurazione</strong></h4>
<p><strong>&#8211; Il puppet master</strong><br />
Raggiungete la macchina prescelta come puppet master che chiameremo, senza troppa fantasia, master e installate i programmi necessari:</p>
<p>root@master:</p>
<pre>~# apt-get install puppetmaster</pre>
<p>Questa operazione installerà anche le dipendenze, compreso il pacchetto per l&#8217;agent puppet.<br />
L&#8217;installazione terminerà con uno sconfortante errore: niente paura! semplicemente il master non è ancora stato configurato a dovere e gli script di init non sono in grado di avviarlo correttamente.<br />
Preoccupiamoci innanzitutto di permettere l&#8217;accesso ai file che verranno serviti dal nostro master, editate il file /etc/puppet/fileserver.conf e aggiungete una riga per permettere l&#8217;accesso alla sottorete 192.168.0.0/24 (per esempio).</p>
<p>&nbsp;</p>
<p>Prepariamo un piccolo laboratorio con 3 macchine</p>
<pre>Name                 IP                     OS                    Descrizione
puppet01        192.168.1.10            CentOS 6.5               puppet master
puppet02        192.168.1.20            CentOS 6.5               puppet client
puppet03        192.168.1.30            CentOS 5.10              puppet client</pre>
<p>** configuriamo il file /etc/hosts</p>
<pre># vim /etc/hosts

192.168.1.10    puppet01
192.168.1.20    puppet02
192.168.1.30    puppet03</pre>
<p>&#8211; Inseriamo queste due righe nel [main] edl file /etc/puppet/puppet.conf</p>
<pre class="prettyprint prettyprinted"><span class="pln">certname </span><span class="pun">=</span><span class="pln"> puppet
dns_alt_names </span><span class="pun">=</span><span class="pln"> puppet</span><span class="pun">,</span><span class="pln">puppet01</span><span class="pun">.localdomain</span></pre>
<p>&#8211; Configuriamo il certificato<br />
Con questo comando si creerà il certificato CA e il certificato per il puppetmaster</p>
<p>puppet01 # puppet master &#8211;verbose &#8211;no-daemonize</p>
<p>notice: Starting Puppet master version 2.7.25<br />
(una volta apparsa la riga qui sopra potete chiudere con un Ctrl-C)</p>
<p>* verifichiamo: # puppet cert list &#8211;all<br />
+ &#8220;srv-c6.localdomain&#8221; (10:BD:EB:92:CE:98:A7:37:FE:4B:D8:20:5E:C2:44:D5) (alt names: &#8220;DNS:puppet&#8221;, &#8220;DNS:puppet.localdomain&#8221;, &#8220;DNS:puppet01.localdomain&#8221;)</p>
<p>* riavviamo il servizio :</p>
<pre>#  /etc/init.d/puppetmaster restart</pre>
<p>&#8211; <strong>Installazione dei client</strong></p>
<p>sulle macchine puppet02 e puppet03 installare soltanto il client &#8220;puppet&#8221; nei seguenti modi :</p>
<pre>Ubuntu/Debian : # sudo apt-get install puppet

RHEL/Centos   : # sudo yum install puppet -y</pre>
<p>** sulle macchine client andremo a modificare il file puppet.conf indicando il nome della macchina Server, il puppetmaster</p>
<pre># vim /etc/puppet/puppet.conf

[agent]
server = puppet01</pre>
<p>su puppet02 e puppet03</p>
<p># puppet agent &#8211;test # si dovrebbe vedere l&#8217;agente creare una richiesta di certificato al master</p>
<p>ora su puppet01 eseguite</p>
<p># puppet cert list &#8211;all # dovreste vedere le richieste effettuate dai client 01 e 02</p>
<p>La prima fase e&#8217; cosi terminata, nel prossimo articolo vedremo come installare e configurare la <strong>Dashboard</strong> di Puppet per avere una gestione centralizzata tramite Browser</p>
]]></content:encoded>
					
					<wfw:commentRss>https://tuttiperlinux.blog/2014/11/30/puppet-automatizziamo-e-gestiamo-ogni-task/feed/</wfw:commentRss>
			<slash:comments>2</slash:comments>
		
		
		
		<media:content url="https://2.gravatar.com/avatar/855ab7cb725a5b56c356471b79d1cef6?s=96&#38;d=&#38;r=G" medium="image">
			<media:title type="html">lordisil72lordisil72</media:title>
		</media:content>

		<media:content url="https://tuttiperlinux.files.wordpress.com/2014/11/puppetlabs.png" medium="image">
			<media:title type="html">Puppet Labs</media:title>
		</media:content>
	</item>
	</channel>
</rss>
