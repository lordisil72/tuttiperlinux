<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	xmlns:georss="http://www.georss.org/georss" xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#" xmlns:media="http://search.yahoo.com/mrss/"
	>

<channel>
	<title>chef &#8211; Tutti per Linux</title>
	<atom:link href="https://tuttiperlinux.blog/tag/chef/feed/" rel="self" type="application/rss+xml" />
	<link>https://tuttiperlinux.blog</link>
	<description>Tutto cio&#039; che avresti sempre voluto capire su Linux ed il mondo Digitale</description>
	<lastBuildDate>Mon, 19 Jan 2015 08:03:54 +0000</lastBuildDate>
	<language>it-IT</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>http://wordpress.com/</generator>
<cloud domain='tuttiperlinux.blog' port='80' path='/?rsscloud=notify' registerProcedure='' protocol='http-post' />
<image>
		<url>https://secure.gravatar.com/blavatar/fa5c4cf69896031d9ec71ff8d5aafd25?s=96&#038;d=https%3A%2F%2Fs0.wp.com%2Fi%2Fbuttonw-com.png</url>
		<title>chef &#8211; Tutti per Linux</title>
		<link>https://tuttiperlinux.blog</link>
	</image>
	<atom:link rel="search" type="application/opensearchdescription+xml" href="https://tuttiperlinux.blog/osd.xml" title="Tutti per Linux" />
	<atom:link rel='hub' href='https://tuttiperlinux.blog/?pushpress=hub'/>
	<item>
		<title>Ansible per l’automazione IT ed il Configuration Management</title>
		<link>https://tuttiperlinux.blog/2015/01/13/ansible-per-lautomazione-it-ed-il-configuration-management/</link>
					<comments>https://tuttiperlinux.blog/2015/01/13/ansible-per-lautomazione-it-ed-il-configuration-management/#comments</comments>
		
		<dc:creator><![CDATA[Tutti per Linux]]></dc:creator>
		<pubDate>Tue, 13 Jan 2015 12:49:52 +0000</pubDate>
				<category><![CDATA[SysAdmin]]></category>
		<category><![CDATA[WebServer]]></category>
		<category><![CDATA[aws]]></category>
		<category><![CDATA[cfengine]]></category>
		<category><![CDATA[chef]]></category>
		<category><![CDATA[configuration management]]></category>
		<category><![CDATA[devops]]></category>
		<category><![CDATA[ec2]]></category>
		<category><![CDATA[google engine]]></category>
		<category><![CDATA[handlers]]></category>
		<category><![CDATA[linux blog in italiano]]></category>
		<category><![CDATA[modules]]></category>
		<category><![CDATA[open source]]></category>
		<category><![CDATA[playbook]]></category>
		<category><![CDATA[puppet]]></category>
		<category><![CDATA[ruby]]></category>
		<category><![CDATA[salstack]]></category>
		<category><![CDATA[ssh]]></category>
		<category><![CDATA[tasks]]></category>
		<category><![CDATA[yaml]]></category>
		<guid isPermaLink="false">http://tuttiperlinux.com/?p=920</guid>

					<description><![CDATA[Ansible e’ un tool di Configuration Management ed IT Automation che sta riscuotendo un notevole successo tra gli addetti ai lavori in virtu’ della sua immediatezza, della sua semplicita’ di utilizzo e del superamento delle limitazioni della tipica configurazione basata su &#8220;server &#38; agent&#8221;. Che cos’e’ Ansible Ansible quindi e’ un tool di Configuration Management ed &#8230; <a href="https://tuttiperlinux.blog/2015/01/13/ansible-per-lautomazione-it-ed-il-configuration-management/">Continua a leggere <span class="meta-nav">&#8594;</span></a>]]></description>
										<content:encoded><![CDATA[<div data-shortcode="caption" id="attachment_921" style="width: 310px" class="wp-caption alignleft"><img loading="lazy" aria-describedby="caption-attachment-921" data-attachment-id="921" data-permalink="https://tuttiperlinux.blog/2015/01/13/ansible-per-lautomazione-it-ed-il-configuration-management/ansible_diagram/#main" data-orig-file="https://tuttiperlinux.files.wordpress.com/2015/01/ansible_diagram.jpg" data-orig-size="788,436" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="ANSIBLE_DIAGRAM" data-image-description="&lt;p&gt;Ansible e l’automazione IT&lt;/p&gt;
" data-image-caption="&lt;p&gt;Ansible e l’automazione IT&lt;/p&gt;
" data-medium-file="https://tuttiperlinux.files.wordpress.com/2015/01/ansible_diagram.jpg?w=300" data-large-file="https://tuttiperlinux.files.wordpress.com/2015/01/ansible_diagram.jpg?w=600" class="size-medium wp-image-921" src="https://tuttiperlinux.files.wordpress.com/2015/01/ansible_diagram.jpg?w=300&#038;h=166" alt="Ansible e l’automazione IT" width="300" height="166" srcset="https://tuttiperlinux.files.wordpress.com/2015/01/ansible_diagram.jpg?w=300&amp;h=166 300w, https://tuttiperlinux.files.wordpress.com/2015/01/ansible_diagram.jpg?w=600&amp;h=332 600w, https://tuttiperlinux.files.wordpress.com/2015/01/ansible_diagram.jpg?w=150&amp;h=83 150w" sizes="(max-width: 300px) 100vw, 300px" /><p id="caption-attachment-921" class="wp-caption-text">Ansible e l’automazione IT</p></div>
<p><strong>Ansible</strong> e’ un tool di <strong>Configuration Management</strong> ed <strong>IT Automation</strong> che sta riscuotendo un notevole successo tra gli addetti ai lavori in virtu’ della sua immediatezza, della sua semplicita’ di utilizzo e del superamento delle limitazioni della tipica configurazione basata su &#8220;server &amp; agent&#8221;.</p>
<h4><strong>Che cos’e’ Ansible</strong></h4>
<p><a href="http://www.ansible.com/home">Ansible</a> quindi e’ un tool di Configuration Management ed IT Automation che rientra nella sfera degli strumenti tipici del metodo <a href="https://it.wikipedia.org/wiki/Devops"><strong>DevOps</strong></a>.</p>
<p>DevOps e&#8217; un movimento nato per abbattere il muro di gomma che nel corso degli anni si e’ innalzato tra Developer e Sysadmin. Per usare un’analogia, DevOps e’ una cultura che ha lo scopo di creare una pipeline (in pratica un ponte di comunicazione) tra sviluppatori ed amministratori di sistema.</p>
<p><strong>L’obiettivo</strong> e’ uno solo: aumentare costantemente la soddisfazione del cliente producendo ed erogando software allo stato dell’arte con continue release correttive.</p>
<p>Per raggiungere un obiettivo cosi’ ambizioso e’ importante poter contare non solo sulle persone ma anche sugli strumenti. Cosi’ sono nati tool agili ed intuitivi che hanno lo scopo di automatizzare lo sviluppo, il testing e la configurazione di server ed applicazioni. Questa famiglia di tool per il Configuration Management comprende gia diversi nomi blasonati come ad esempio <strong>Puppet</strong>, <strong>Chef</strong>, <strong>Saltstack</strong> e <strong>CFEngine</strong>.</p>
<h4>Configuration Management in breve</h4>
<p>Il Configuration Management e’ un processo utilizzato per definire la configurazione delle applicazioni web e dei server in modo consistente, possibilmente sotto controllo di versione. Con il Configuration Management e’ possibile definire a priori come dovra’ essere configurato il server X o l’applicazione Y. Il tutto in linguaggio sorgente o sotto forma di meta-linguaggio.</p>
<p>I tool di <strong>Configuration Management</strong> leggono le configurazioni a partire da un file sorgente ed applicano le stesse su uno o piu’ server, in modo <strong>automatico</strong> e prevedibile.</p>
<p>Esempio:</p>
<pre>inizio configurazione
1 assicurati che apache2 sia installato
2 assicurati che php5 sia installato
3 assicurati che mysql sia installato
fine configurazione</pre>
<p>Un tool di Configuration Management puo’ leggere queste istruzioni ed applicarle su uno o piu’ server. In questo modo l’operatore puo’ replicare la stessa configurazione su decine di server oppure ricostruire la stessa in pochi secondi quando uno o piu’ server vengono messi fuori uso.</p>
<h4>Ansible, un po’ di storia</h4>
<p>Lanciato nel 2012, <strong>Ansible </strong> nasce da un’idea di <a title="Michael De Haan Ansible" href="http://www.linkedin.com/in/michaeldehaan" target="_blank">Michael de Haan</a>, creatore tra l’altro di <a title="Cobbler" href="http://www.cobblerd.org/" target="_blank">Cobbler</a>. De Haan un bel giorno sente la necessita’ di scrivere un software che potesse <span style="color:#000000;"><a style="color:#000000;" title="The origins of Ansible" href="http://blog.ansibleworks.com/2013/12/08/the-origins-of-ansible/" target="_blank">semplificare all’ennesima potenza</a></span> le attivita’ di Configuration Management ed Automazione IT.</p>
<p>Fino a quel momento il panorama del Configuration Management era dominato da <strong>Puppet</strong> e <strong>Chef</strong> (che comunque mantengono e sicuramente manterranno  anche in futuro quote di mercato molto vaste). Ma seppure ottimi, sia Puppet che Chef hanno alcuni punti deboli, che fanno storcere il naso ai Sysadmin piu’ esigenti:</p>
<p>* Puppet e Chef funzionano principalmente in modalita’ server – agent</p>
<p>* Chef richiede anche la conoscenza del linguaggio Ruby</p>
<p>Anche se non si tratta di limitazioni insormontabili ci sono comunque alcuni svantaggi in questo tipo di approccio.</p>
<p>Prima di tutto non sempre e’ possibile installare un agent sul server di destinazione, poiche&#8217; un agent e’ comunque un piccolo software che rimane in esecuzione permanente su uno o piu’ server ed ha lo scopo di attendere comandi e configurazioni impartite dal server master.</p>
<p>Sia Chef che Puppet utilizzano questo approccio che spesso non e’ possibile mettere in pratica.</p>
<p>Pensiamo ad esempio ad ambienti server che per ragioni di conformita’ o sicurezza non possono ospitare agenti o software estranei oppure a quei server con un discreto numero di anni sulle spalle, dove l’installazione di una versione aggiornata di Ruby (richiesta, ad esempio, da Puppet) potrebbe causare effetti imprevedibili.</p>
<h4>I vantaggi di Ansible</h4>
<p>Perche’ dunque adottare Ansibile ?<br />
Se sei un Sysadmin o un Developer potrai trarre sicuramente grande beneficio dall’uso di questo tool: con Ansible non e’ mai stato cosi’ semplice definire lo stato di un server e delle tue applicazioni web.<br />
Con Ansible quindi il risparmio di tempo e di codice e’ notevole rispetto a Puppet o Chef.</p>
<h4>Curva di apprendimento bassa</h4>
<p>Dalla lettura della documentazione alla scrittura dei primi Playbooks il passo sara&#8217; breve, ed in pochi minuti vi sara&#8217; possibile iniziare a lavorare con Ansible senza dover penare con configurazioni di server Master e agenti vari.</p>
<h4>Non sono richieste capacita’ di coding</h4>
<p>Puppet e Chef nascono entrambi da un team di sviluppatori follemente innamorati di Ruby. Per la definizione dello stato dei server e delle configurazioni Puppet adotta un linguaggio simile al codice Ruby mentre per definire lo stato di un server con Chef e’ addirittura essenziale conoscere il linguaggio, invece <strong>Ansible supera</strong> completamente questa limitazione.</p>
<p>In Ansible ad esempio e’ possibile definire che il server X dovra’ contenere Apache con due righe:<br />
es:</p>
<pre>Install Httpd
yum: name=httpd state=latest</pre>
<p>Come si puo&#8217; notare, a differenza di Puppet, Chef e Saltstack, Ansible non ha bisogno di nessun agente per applicare le configurazioni su un server. Ansible utilizza di default il trasporto <strong>SSH</strong>: questo elimina la necessita’ di installare software estraneo sui nodi.</p>
<h4>Modulare e Open Source</h4>
<p>Ansible e’ composto da numerosi moduli. Per analogia i <a href="http://docs.ansible.com/modules.html" target="_blank">moduli di Ansible </a>hanno la stessa funzione delle risorse in Puppet. Ogni modulo svolge delle funzioni ben precise e gestisce un singolo aspetto di ogni sistema. Questa architettura consente di espandere Ansible praticamente all’infinito, senza contare che i moduli possono essere scritti in qualsiasi linguaggio di programmazione. Inoltre Ansible e’ Open Source e la comunita’ continua a crescere rapidamente.</p>
<h4>Ansible, i concetti chiave</h4>
<p>Prima di terminare con questa introduzione su Ansible vediamo quali sono i concetti chiave ed i componenti che ruotano attorno a questo software.</p>
<h4>Ansible: l’inventario</h4>
<p>L’inventario e’ una lista di server sui quali Ansible applica, a comando, le configurazioni di sistema e le istruzioni di automazione. L’inventario di solito e’ contenuto all’interno del file <strong>/etc/ansible/hosts</strong> anche se e’ possibile specificare una posizione a piacere.</p>
<p>All’interno dell’inventario l’operatore puo’ specificare la lista dei server “bersaglio”. E&#8217; chiaramente obbligatorio che ogni server abbia una corrispondenza DNS anche se e’ possibile specificare ogni server con il proprio indirizzo IP . Un esempio di inventario:</p>
<pre>[webservers]
webserver1.example.com
webserver2.example.com

[dbservers]
dbserver1.example.com
dbserver2.example.com</pre>
<h4>Ansible ed i Tasks</h4>
<p>In Ansible i Tasks sono dei “compiti” ovvero una serie di istruzioni che Ansible esegue in ordine di apparizione. Ogni istruzione contiene la definizione e/o la configurazione che dovra’ essere applicata ad ogni sistema.</p>
<h4>Ansible e gli Handlers</h4>
<p>Gli Handlers in Ansible sono delle istruzioni che vengono eseguite a seguito di una determinata azione. Ad esempio dopo aver installato httpd un operatore puo’ voler avviare Apache automaticamente. Un esempio di Handler che avvia Apache su CentOS:</p>
<pre>name: start httpd
service  : name=httpd state=started enabled=yes</pre>
<p>Gli Handlers si basano sul modulo <a title="Ansible Service Module" href="http://docs.ansible.com/service_module.html" target="_blank">service</a> di Ansible (questo modulo viene utilizzato per gestire i servizi di sistema).</p>
<h4>Ansible ed i Playbook</h4>
<p>In Ansible i <strong>Playbook</strong> sono delle collezioni di Tasks. Ogni Playbook puo’ contenere un determinato numero di <strong>Tasks</strong> e di <strong>Handlers</strong>. I Playbook devono essere definiti in linguaggio <strong>YAML</strong>.</p>
<p><strong><br />
Ansible ed i Moduli</strong></p>
<p>Ansible e’ composto da numerosi moduli. Esistono moduli per gestire i servizi di Cloud Computing (EC2 su AWS), Rackspace e Google Compute Engine, esistono moduli per installare pacchetti software su server Linux con apt e yum, moduli per gestire file di configurazione e database e molto altro ancora.</p>
<p>Per una lista completa dei moduli puoi consultare la documentazione ufficiale: <a title="Ansible Modules" href="http://docs.ansible.com/modules.html" target="_blank">Ansible Modules</a>.</p>
<p>#AnsibleConfigurationManagement</p>
]]></content:encoded>
					
					<wfw:commentRss>https://tuttiperlinux.blog/2015/01/13/ansible-per-lautomazione-it-ed-il-configuration-management/feed/</wfw:commentRss>
			<slash:comments>7</slash:comments>
		
		
		
		<media:content url="https://2.gravatar.com/avatar/855ab7cb725a5b56c356471b79d1cef6?s=96&#38;d=&#38;r=G" medium="image">
			<media:title type="html">lordisil72lordisil72</media:title>
		</media:content>

		<media:content url="https://tuttiperlinux.files.wordpress.com/2015/01/ansible_diagram.jpg?w=300" medium="image">
			<media:title type="html">Ansible e l’automazione IT</media:title>
		</media:content>
	</item>
		<item>
		<title>Virtualizzazione e provisioning senza sforzo</title>
		<link>https://tuttiperlinux.blog/2015/01/03/virtualizzazione-e-provisioning-senza-sforzo/</link>
					<comments>https://tuttiperlinux.blog/2015/01/03/virtualizzazione-e-provisioning-senza-sforzo/#comments</comments>
		
		<dc:creator><![CDATA[Tutti per Linux]]></dc:creator>
		<pubDate>Sat, 03 Jan 2015 14:43:22 +0000</pubDate>
				<category><![CDATA[News]]></category>
		<category><![CDATA[Virtualizzazione]]></category>
		<category><![CDATA[ansibe]]></category>
		<category><![CDATA[bash]]></category>
		<category><![CDATA[box]]></category>
		<category><![CDATA[centos]]></category>
		<category><![CDATA[chef]]></category>
		<category><![CDATA[content management]]></category>
		<category><![CDATA[debian]]></category>
		<category><![CDATA[deploy]]></category>
		<category><![CDATA[git]]></category>
		<category><![CDATA[kvm]]></category>
		<category><![CDATA[linux blox in italiano]]></category>
		<category><![CDATA[provisioning]]></category>
		<category><![CDATA[puppet]]></category>
		<category><![CDATA[scripting]]></category>
		<category><![CDATA[ubuntu]]></category>
		<category><![CDATA[vagrant]]></category>
		<category><![CDATA[virtualbox]]></category>
		<category><![CDATA[virtualizzazione]]></category>
		<category><![CDATA[vmware]]></category>
		<category><![CDATA[xen]]></category>
		<guid isPermaLink="false">http://tuttiperlinux.com/?p=866</guid>

					<description><![CDATA[La virtualizzazione ha sicuramente cambiato il modo di lavorare e di pensare alla gestione dei sistemi informatici aziendali o dei service provider, ed il cloud ha aggiunto un&#8217;ulteriore strato, sia di liberta&#8217;, ma anche di complicazione in piu&#8217;, nella gestione dei nuovi sistemi ad alta affidabilita&#8217; che devono essere in grado di scalare nel minor tempo possibile &#8230; <a href="https://tuttiperlinux.blog/2015/01/03/virtualizzazione-e-provisioning-senza-sforzo/">Continua a leggere <span class="meta-nav">&#8594;</span></a>]]></description>
										<content:encoded><![CDATA[<div data-shortcode="caption" id="attachment_868" style="width: 310px" class="wp-caption alignleft"><img loading="lazy" aria-describedby="caption-attachment-868" data-attachment-id="868" data-permalink="https://tuttiperlinux.blog/2015/01/03/virtualizzazione-e-provisioning-senza-sforzo/vagrant-virtualbox/#main" data-orig-file="https://tuttiperlinux.files.wordpress.com/2015/01/vagrant-virtualbox.png" data-orig-size="1184,265" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="vagrant-virtualbox" data-image-description="&lt;p&gt;Vagrant Virtualization Box&lt;/p&gt;
" data-image-caption="&lt;p&gt;Vagrant Virtualization Box&lt;/p&gt;
" data-medium-file="https://tuttiperlinux.files.wordpress.com/2015/01/vagrant-virtualbox.png?w=300" data-large-file="https://tuttiperlinux.files.wordpress.com/2015/01/vagrant-virtualbox.png?w=600" class="size-medium wp-image-868" src="https://tuttiperlinux.files.wordpress.com/2015/01/vagrant-virtualbox.png?w=300&#038;h=67" alt="Vagrant Virtualization Box" width="300" height="67" srcset="https://tuttiperlinux.files.wordpress.com/2015/01/vagrant-virtualbox.png?w=300&amp;h=67 300w, https://tuttiperlinux.files.wordpress.com/2015/01/vagrant-virtualbox.png?w=600&amp;h=134 600w, https://tuttiperlinux.files.wordpress.com/2015/01/vagrant-virtualbox.png?w=150&amp;h=34 150w" sizes="(max-width: 300px) 100vw, 300px" /><p id="caption-attachment-868" class="wp-caption-text">Vagrant Virtualization Box</p></div>
<p>La virtualizzazione ha sicuramente cambiato il modo di lavorare e di pensare alla gestione dei sistemi informatici aziendali o dei service provider, ed il cloud ha aggiunto un&#8217;ulteriore strato, sia di liberta&#8217;, ma anche di complicazione in piu&#8217;, nella gestione dei nuovi sistemi ad alta affidabilita&#8217; che devono essere in grado di scalare nel minor tempo possibile ecc&#8230;.</p>
<p>Queste esigenze hanno portato alla nascita di innumerevoli sistemi di virtualizzazione, tra i piu&#8217; conosciuti sicuramente ci sono Xen, Vmware, Kvm, Virtuozzo, Virtualbox, Openvz &#8230;..! che per certi versi si trasformano in un incubo per gli amministratori di sistema, costretti ad avere diversi ambienti di gestione delle VM su diversi sistemi e con molteplici file di configurazione da settare.</p>
<p>Infatti quando ci troviamo ad amministrare un ambiente cloud con molte macchine, il rischio di dover aggiungere una macchina in più e doverla successivamente configurare in poco tempo per il <strong>deploy</strong> e la messa in produzione insieme a tutte le altre è molto alto. In più, se siamo all’interno di un’architettura che deve scalare rapidamente per rispondere in modo agile alle esigenze degli utenti (e chiaramente dell’azienda), dover attendere l’installazione del sistema operativo e poi del software non è certamente divertente. Per tutte queste esigenze, <a href="https://www.vagrantup.com/"><strong>Vagrant</strong> </a>potrebbe risultare la giusta soluzione che può semplificarci la vita, permettendoci di aggirare tutte queste “rogne”</p>
<p><a href="https://www.vagrantup.com/"><strong>Vagrant</strong></a> è un gestore di macchine virtuali che può usare parecchi hypervisor tra cui <strong>VirtualBox</strong>, il <strong>predefinito</strong>, ma anche VMWare, Xen e KVM. Attraverso questo software infatti potremo basarci su una struttura di base comune a tutte le macchine, che contiene il sistema operativo (anche se poi vedremo come personalizzare questa alberatura), e mantenere degli step comuni nella configurazione delle nostre istanze virtuali, per poi dedicarci solo alle rifiniture, risparmiando tantissimo tempo grazie alle capacità di elaborazione dei datacenter che abbiamo in-house o magari in cloud.</p>
<p>Per inizializzare il nostro primo progetto Vagrant, abbiamo solo bisogno di spostarci in una directory vuota e dare il comando (avendo già installato il software):</p>
<p><strong>Installazione Vagrant</strong></p>
<pre>### Verificare di aver installati i seguenti pacchetti : rubygems ruby1.9.1-dev virtualbox-4.2 (o superiori)
# sudo apt-get install vagrant
# vagrant plugin install vagrant-vbguest
</pre>
<p><strong>Le Box di Vagrant</strong><br />
Il primo concetto fondamentale da fare nostro, per quanto riguarda Vagrant, è quello del concetto di Box. Una Box per quanto riguarda questo ambiente di virtualizzazione infatti è una vera e propria scatola che contiene il sistema operativo, e tutto quello di cui abbiamo bisogno come i software di base ed ogni loro configurazione di base. Al punto di partenza abbiamo delle Box rese disponibili dai server di Vagrant, ma possiamo tranquillamente aggiungerne altre: tutto quello di cui abbiamo bisogno è un po’ di fantasia coi nomi, e di conoscere l’URL remoto tramite il quale scaricare la Box (ne trovate parecchie già fatte su <a href="http://www.vagrantbox.es/">Vagrantbox.es</a> oppure su <a href="https://atlas.hashicorp.com/boxes/search">Hasicorp</a>), con questa sintassi da riga di comando.</p>
<pre># vagrant init
# vagrant box add name url</pre>
<p>che, traducendolo con un esempio reale:</p>
<pre># vagrant box add precise32 http://files.vagrantup.com/precise32.box</pre>
<p>Che non farà altro che aggiungere al nostro progetto Vagrant una Box Ubuntu 12.04 a 32 bit.</p>
<p><strong>Il Vagrantfile</strong><br />
Una volta scaricata la nostra Box di partenza, possiamo cominciare a configurare il nostro progetto Vagrant tramite il <a href="https://docs.vagrantup.com/v2/">Vagrantfile</a> che abbiamo a disposizione e che si presenta essenzialmente come un file <a href="https://www.ruby-lang.org/it/documentation/">Ruby</a> con vari namespace, ma niente paura, non è necessario conoscere direttamente <a href="https://www.ruby-lang.org/it/documentation/">Ruby</a> per la configurazione (anche se può aiutare), ed è possibile fare riferimento alla documentazione per conoscere i vari prefissi e le possibilità che abbiamo a disposizione. Ogni volta che eseguiamo un comando Vagrant, il Vagrantfile viene cercato in tutte le directory di livello superiore nell’albero.</p>
<p>Il file può avere grossomodo un aspetto del genere:</p>
<p><strong>Esempio</strong> di un cluster di 7 Boxes. Preso da:<br />
### <a href="https://github.com/patrickdlee/vagrant-examples" rel="nofollow">https://github.com/patrickdlee/vagrant-examples</a></p>
<pre>domain   = 'example.com'
 
nodes = [
  { :hostname =&gt; 'ex7proxy',   :ip =&gt; '192.168.0.42', :box =&gt; 'precise32' },
  { :hostname =&gt; 'ex7db',      :ip =&gt; '192.168.0.43', :box =&gt; 'precise32' },
  { :hostname =&gt; 'ex7web1',    :ip =&gt; '192.168.0.44', :box =&gt; 'precise32' },
  { :hostname =&gt; 'ex7web2',    :ip =&gt; '192.168.0.45', :box =&gt; 'precise32' },
  { :hostname =&gt; 'ex7static1', :ip =&gt; '192.168.0.46', :box =&gt; 'precise32' },
  { :hostname =&gt; 'ex7static2', :ip =&gt; '192.168.0.47', :box =&gt; 'precise32' },
  { :hostname =&gt; 'ex7cache',   :ip =&gt; '192.168.0.48', :box =&gt; 'precise32' },
]
 
Vagrant::Config.run do |config|
  nodes.each do |node|
    config.vm.define node[:hostname] do |node_config|
      node_config.vm.box = node[:box]
      node_config.vm.host_name = node[:hostname] + '.' + domain
      node_config.vm.network :hostonly, node[:ip]
 
      memory = node[:ram] ? node[:ram] : 256;
      node_config.vm.customize [
        'modifyvm', :id,
        '--name', node[:hostname],
        '--memory', memory.to_s
      ]
    end
  end
 
  config.vm.provision :puppet do |puppet|
    puppet.manifests_path = 'puppet/manifests'
    puppet.manifest_file = 'site.pp'
    puppet.module_path = 'puppet/modules'
  end
end</pre>
<p>Prima di arrivare a questo livello tuttavia, è necessario cominciare dalle basi: il primo file di configurazione di Vagrant che andremo a scrivere conterrà ben poche specifiche, e si baserà esclusivamente sulla Box che abbiamo scelto per la nostra prima macchina virtuale.</p>
<p># Una singola Box.<br />
#<br />
Vagrant.configure(&#8220;2&#8221;) do |config|<br />
config.vm.box = &#8220;precise32&#8221;<br />
end</p>
<p><strong>Esempio</strong> per una singola Box.</p>
<pre>Vagrant.configure("2") do |config|
config.vm.box = "precise32"
end</pre>
<p>Inoltre il <strong>Vagrantfile</strong> deve essere soggetto a version control (tramite <strong>git</strong> ad esempio) per tenere traccia di ogni modifica e rendere il tutto facilmente riportabile in una nuova architettura</p>
<p><strong>Avviamo la Box</strong></p>
<pre># sudo vagrant up
Bringing machine 'default' up with 'virtualbox' provider...
[default] Importing base box 'precise32'...
[default] Matching MAC address for NAT networking...
[default] Setting the name of the VM...
[default] Clearing any previously set forwarded ports...
[default] Clearing any previously set network interfaces...
[default] Preparing network interfaces based on configuration...
[default] Forwarding ports...
[default] -- 22 =&gt; 2222 (adapter 1)
[default] Booting VM...
[default] Waiting for machine to boot. This may take a few minutes...
[default] Mounting shared folders...
[default] -- /vagrant
</pre>
<p>Adesso che abbiamo il nostro progetto funzionante, basterà dare</p>
<pre># vagrant ssh
Last login: Fri Apr 15 05:43:58 2011 from 10.0.2.2
[vagrant@localhost ~]$</pre>
<p>per collegarci ed esserne subito operativi all’interno della nostra box.</p>
<p><strong>Provisioning</strong><br />
Vagrant non è solo un sistema per avviare velocemente delle macchine virtuali, infatti ci permette anche di controllarle, e di controllarne le impostazioni nel tempo, insieme al software installato. Possiamo quindi gestire la configurazione automatica secondo le nostre esigenze delle varie Box che abbiamo, attraverso una struttura di provisioning abbastanza flessibile che supporta normali shell script (Bash), il buon vecchio <a title="Puppet: automatizziamo e gestiamo ogni task" href="http://tuttiperlinux.com/2014/11/30/puppet-automatizziamo-e-gestiamo-ogni-task/">Puppet</a>, ma anche <a href="https://www.chef.io/solutions/configuration-management/">Chef</a> e <a href="http://www.ansible.com/configuration-management">Ansible</a>.</p>
<p>Tramite questa infrastruttura possiamo modificare il Vagrantfile per eseguire quindi qualsiasi istruzione, che sia configurata per script Puppet oppure attraverso Bash. Ad esempio, possiamo utilizzare la piccola struttura riportata di seguito, che proviene direttamente dalla documentazione di Vagrant e che mostra come sia facile scriversi uno script di configurazione da mandare poi in pasto alla propria Box.</p>
<pre>$script = &lt;&lt;SCRIPT
echo I am provisioning...
date &gt; /etc/vagrant_provisioned_at
SCRIPT</pre>
<pre>Vagrant.configure("2") do |config|
config.vm.provision "shell", inline: $script
end</pre>
<p><strong>Non solo VirtualBox</strong></p>
<p>Una volta imparato a usare Vagrant, avremo comunque basato tutto il nostro lavoro su VirtualBox. Tuttavia, potremmo anche avere qualcosa in contrario sull’uso di VirtualBox, e voler usare altri provider che ci permettano un’amministrazione più efficace o semplicemente il riciclo di competenze che già abbiamo. Ad esempio, Vagrant supporta tramite plugin anche l’integrazione con VMWare o con Xen; questi plugin sono installabili attraverso il gestore integrato nel software, semplicemente tramite un singolo comando, esattamente come in un classico gestore di pacchetti:</p>
<pre># vagrant plugin install vagrant-vmware-fusion</pre>
<p>Oppure se invece di VMWare Fusion usate la variante Workstation:</p>
<pre># vagrant plugin install vagrant-vmware-workstation</pre>
<p>Una volta installato il plugin, ed ovviamente il software di providing delle macchine virtuali che vogliamo testare, ci bastera&#8217; modificare il Vagrantfile, con istruzioni come queste nell&#8217; esempio:</p>
<p><strong>Esempio</strong> tratto da [ <a href="http://puppetlabs.com/blog/new-vmware-provider-gives-vagrant-a-boost" rel="nofollow">http://puppetlabs.com/blog/new-vmware-provider-gives-vagrant-a-boost</a> ]</p>
<pre>config.vm.provider :vmware_workstation do |v|
v.vmx["memsize"] = "2048"
end</pre>
<p>Vagrant può ovviamente essere configurato per essere alla base di una complessa configurazione in ambiente cloud, o della propria infrastruttura più modesta.</p>
<p>Se questo primo articolo vi ha incuriositi, la documentazione ufficiale, passo passo, vi sta aspettando : <a href="https://docs.vagrantup.com/"><strong>VAGRANT DOC</strong></a></p>
<p>Nel prossimo articolo vedremo come sfruttare le potenzialita&#8217; di <strong>Vagrant</strong> <strong>+</strong> <a title="Docker – cosi’ cambia la virtualizzazione" href="http://tuttiperlinux.com/2014/09/07/docker-cosi-cambia-la-virtualizzazione/"><strong>Docker</strong>.</a></p>
<p>#VagrantVirtualizzazioneeProvisioning</p>
]]></content:encoded>
					
					<wfw:commentRss>https://tuttiperlinux.blog/2015/01/03/virtualizzazione-e-provisioning-senza-sforzo/feed/</wfw:commentRss>
			<slash:comments>6</slash:comments>
		
		
		
		<media:content url="https://2.gravatar.com/avatar/855ab7cb725a5b56c356471b79d1cef6?s=96&#38;d=&#38;r=G" medium="image">
			<media:title type="html">lordisil72lordisil72</media:title>
		</media:content>

		<media:content url="https://tuttiperlinux.files.wordpress.com/2015/01/vagrant-virtualbox.png?w=300" medium="image">
			<media:title type="html">Vagrant Virtualization Box</media:title>
		</media:content>
	</item>
	</channel>
</rss>
