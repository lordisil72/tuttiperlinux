<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	xmlns:georss="http://www.georss.org/georss" xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#" xmlns:media="http://search.yahoo.com/mrss/"
	>

<channel>
	<title>memcached &#8211; Tutti per Linux</title>
	<atom:link href="https://tuttiperlinux.blog/tag/memcached/feed/" rel="self" type="application/rss+xml" />
	<link>https://tuttiperlinux.blog</link>
	<description>Tutto cio&#039; che avresti sempre voluto capire su Linux ed il mondo Digitale</description>
	<lastBuildDate>Tue, 16 Sep 2014 08:13:33 +0000</lastBuildDate>
	<language>it-IT</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>http://wordpress.com/</generator>
<cloud domain='tuttiperlinux.blog' port='80' path='/?rsscloud=notify' registerProcedure='' protocol='http-post' />
<image>
		<url>https://secure.gravatar.com/blavatar/fa5c4cf69896031d9ec71ff8d5aafd25?s=96&#038;d=https%3A%2F%2Fs0.wp.com%2Fi%2Fbuttonw-com.png</url>
		<title>memcached &#8211; Tutti per Linux</title>
		<link>https://tuttiperlinux.blog</link>
	</image>
	<atom:link rel="search" type="application/opensearchdescription+xml" href="https://tuttiperlinux.blog/osd.xml" title="Tutti per Linux" />
	<atom:link rel='hub' href='https://tuttiperlinux.blog/?pushpress=hub'/>
	<item>
		<title>Twemproxy il proxy per Memcached</title>
		<link>https://tuttiperlinux.blog/2014/09/16/twemproxy-il-proxy-per-memcached/</link>
					<comments>https://tuttiperlinux.blog/2014/09/16/twemproxy-il-proxy-per-memcached/#respond</comments>
		
		<dc:creator><![CDATA[Tutti per Linux]]></dc:creator>
		<pubDate>Tue, 16 Sep 2014 08:13:33 +0000</pubDate>
				<category><![CDATA[Proxy]]></category>
		<category><![CDATA[cache]]></category>
		<category><![CDATA[cluster]]></category>
		<category><![CDATA[github]]></category>
		<category><![CDATA[hash]]></category>
		<category><![CDATA[linux blog]]></category>
		<category><![CDATA[memcached]]></category>
		<category><![CDATA[open source]]></category>
		<category><![CDATA[proxy]]></category>
		<category><![CDATA[redis]]></category>
		<category><![CDATA[twemproxy]]></category>
		<category><![CDATA[twitter]]></category>
		<guid isPermaLink="false">http://tuttiperlinux.com/?p=554</guid>

					<description><![CDATA[Twemproxy (repository GitHub) è un proxy server che consente di ridurre il numero di connessioni aperte verso un server Memcached o Redis. Per cosa può essere utile questo strumento? &#160; &#160; Le caratteristiche principali sono : &#8211; ridurre il numero di connessioni al cache server agendo come un proxy; &#8211; sharding di dati automatico tra più &#8230; <a href="https://tuttiperlinux.blog/2014/09/16/twemproxy-il-proxy-per-memcached/">Continua a leggere <span class="meta-nav">&#8594;</span></a>]]></description>
										<content:encoded><![CDATA[<p><a href="https://tuttiperlinux.files.wordpress.com/2014/09/twemproxy2.jpg"><img loading="lazy" data-attachment-id="557" data-permalink="https://tuttiperlinux.blog/2014/09/16/twemproxy-il-proxy-per-memcached/twemproxy2/#main" data-orig-file="https://tuttiperlinux.files.wordpress.com/2014/09/twemproxy2.jpg" data-orig-size="1280,720" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="twemproxy2" data-image-description="&lt;p&gt;Twemproxy per Memcached&lt;/p&gt;
" data-image-caption="" data-medium-file="https://tuttiperlinux.files.wordpress.com/2014/09/twemproxy2.jpg?w=300" data-large-file="https://tuttiperlinux.files.wordpress.com/2014/09/twemproxy2.jpg?w=600" class="alignleft size-medium wp-image-557" src="https://tuttiperlinux.files.wordpress.com/2014/09/twemproxy2.jpg?w=300&#038;h=168" alt="twemproxy2" width="300" height="168" srcset="https://tuttiperlinux.files.wordpress.com/2014/09/twemproxy2.jpg?w=300&amp;h=168 300w, https://tuttiperlinux.files.wordpress.com/2014/09/twemproxy2.jpg?w=597&amp;h=336 597w, https://tuttiperlinux.files.wordpress.com/2014/09/twemproxy2.jpg?w=150&amp;h=84 150w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p><strong>Twemproxy</strong> (repository <a href="https://github.com/twitter/twemproxy">GitHub</a>) è un proxy server che consente di ridurre il numero di connessioni aperte verso un server Memcached o <a title="DB fate largo ai No-SQL" href="http://tuttiperlinux.com/2014/09/10/db-fate-largo-ai-no-sql/">Redis</a>. Per cosa può essere utile questo strumento?</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong>Le caratteristiche principali sono</strong> :</p>
<p>&#8211; ridurre il numero di connessioni al cache server agendo come un proxy;</p>
<p>&#8211; sharding di dati automatico tra più cache server;</p>
<p>&#8211; supporto per l’hash con diverse strategie e funzioni di <a href="http://web.tiscalinet.it/vincal/funzioni_unidirezionali.htm">hashing</a>;</p>
<p>&#8211; configurabile per disabilitare i nodi caduti;</p>
<p>&#8211; esecuzione di istanze multiple, consentendo al client di connettersi al primo proxy server disponibile;</p>
<p>&#8211; pipelining e batching di richieste con risparmio di round-trip;</p>
<p>&#8211; configurabile per disabilitare i nodi non più funzionanti, e richiamarli successivamente, dopo un po’ di tempo;</p>
<p>Twemproxy è stato reso <strong>open source</strong> da Twitter (che lo ha sviluppato per le proprie esigenze) all’inizio del 2012, con il supporto a memcached, e recentemente ha aggiunto anche il supporto a Redis. Twitter fa uso estensivo dei cache server ed il sistema sul quale gira Twemproxy, per Twitter, è di dimensioni impressionanti; immaginate che i sistemisti devono gestire centinaia di cache server, che a loro volta amministrano svariati TB di dati ciascuno per oltre trenta servizi diversi, in-memory, inclusa la memorizzazione dei tweet. Parliamo di almeno due milioni di miliardi di query al giorno, ossia più di ventitré milioni di query al secondo, per un’infrastruttura che, peraltro, continua a crescere in maniera esponenziale.</p>
<p>Leggi anche articolo (&#8220;<a title="Ottimizzare grazie a Memcached" href="http://tuttiperlinux.com/2014/09/14/ottimizzare-grazie-a-memcached/">Ottimizzazre grazie a Memcached</a>&#8220;)</p>
<p>&nbsp;</p>
]]></content:encoded>
					
					<wfw:commentRss>https://tuttiperlinux.blog/2014/09/16/twemproxy-il-proxy-per-memcached/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		
		<media:content url="https://2.gravatar.com/avatar/855ab7cb725a5b56c356471b79d1cef6?s=96&#38;d=&#38;r=G" medium="image">
			<media:title type="html">lordisil72lordisil72</media:title>
		</media:content>

		<media:content url="https://tuttiperlinux.files.wordpress.com/2014/09/twemproxy2.jpg?w=300" medium="image">
			<media:title type="html">twemproxy2</media:title>
		</media:content>
	</item>
		<item>
		<title>Ottimizzare grazie a Memcached</title>
		<link>https://tuttiperlinux.blog/2014/09/14/ottimizzare-grazie-a-memcached/</link>
					<comments>https://tuttiperlinux.blog/2014/09/14/ottimizzare-grazie-a-memcached/#comments</comments>
		
		<dc:creator><![CDATA[Tutti per Linux]]></dc:creator>
		<pubDate>Sun, 14 Sep 2014 23:54:10 +0000</pubDate>
				<category><![CDATA[Networking]]></category>
		<category><![CDATA[balance]]></category>
		<category><![CDATA[bilanciamento]]></category>
		<category><![CDATA[database]]></category>
		<category><![CDATA[front-end]]></category>
		<category><![CDATA[hot key]]></category>
		<category><![CDATA[linux blog]]></category>
		<category><![CDATA[mctop]]></category>
		<category><![CDATA[memcached]]></category>
		<category><![CDATA[nic]]></category>
		<category><![CDATA[sql]]></category>
		<guid isPermaLink="false">http://tuttiperlinux.com/?p=547</guid>

					<description><![CDATA[Ottimizzazione server dedicato grazie a MemCached Spesso si e&#8217; portati a credere che i meccanismi di cache siano una specie di Panacea, e che dalla loro implementazione non si debba temere alcun  problema : ovviamente non è così. Specialmente se il tuo cloud è dedicato all’erogazione di siti/portali web con volumi importanti l’utilizzo di memcached &#8230; <a href="https://tuttiperlinux.blog/2014/09/14/ottimizzare-grazie-a-memcached/">Continua a leggere <span class="meta-nav">&#8594;</span></a>]]></description>
										<content:encoded><![CDATA[<p><strong><a href="https://tuttiperlinux.files.wordpress.com/2014/09/theflash_memcached.jpg"><img loading="lazy" data-attachment-id="548" data-permalink="https://tuttiperlinux.blog/2014/09/14/ottimizzare-grazie-a-memcached/theflash_memcached/#main" data-orig-file="https://tuttiperlinux.files.wordpress.com/2014/09/theflash_memcached.jpg" data-orig-size="600,337" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="theflash_memcached" data-image-description="&lt;p&gt;Memcached flash website&lt;/p&gt;
" data-image-caption="" data-medium-file="https://tuttiperlinux.files.wordpress.com/2014/09/theflash_memcached.jpg?w=300" data-large-file="https://tuttiperlinux.files.wordpress.com/2014/09/theflash_memcached.jpg?w=600" class="alignleft size-medium wp-image-548" src="https://tuttiperlinux.files.wordpress.com/2014/09/theflash_memcached.jpg?w=300&#038;h=168" alt="theflash_memcached" width="300" height="168" srcset="https://tuttiperlinux.files.wordpress.com/2014/09/theflash_memcached.jpg?w=300&amp;h=168 300w, https://tuttiperlinux.files.wordpress.com/2014/09/theflash_memcached.jpg?w=598&amp;h=336 598w, https://tuttiperlinux.files.wordpress.com/2014/09/theflash_memcached.jpg?w=150&amp;h=84 150w, https://tuttiperlinux.files.wordpress.com/2014/09/theflash_memcached.jpg 600w" sizes="(max-width: 300px) 100vw, 300px" /></a>Ottimizzazione server dedicato grazie a MemCached</strong></p>
<p>Spesso si e&#8217; portati a credere che i meccanismi di cache siano una specie di Panacea, e che dalla loro implementazione non si debba temere alcun  problema : <strong>ovviamente non è così</strong>.<br />
Specialmente se il tuo cloud è dedicato all’erogazione di siti/portali web con volumi importanti l’utilizzo di memcached può sicuramente aumentare le performance di quest&#8217;ultimo;  ma può anche introdurre un nuovo point of failure, uno di quelli che non ti aspetti.<br />
Facciamo un esempio, non ti aspetteresti che un’istanza memcached possa rappresentare un collo di bottiglia !, men che meno un pool di istanze bilanciate e, cosa forse ancor più singolare, che lo possano rappresentare a livello di networking. Eppure succede!</p>
<p><strong>Cos’è memcached, e come funziona?</strong><br />
<a href="http://memcached.org/">Memcached</a> è un sistema di caching distribuito ed ha una struttura client/server che permette di servire i dati più richiesti direttamente dalla RAM, riducendo cosi al tempo stesso il carico sul database.<br />
Questo può essere di grande aiuto se si ha la necessità di gestire una quantità di dati davvero importante.<br />
<strong>Sfruttare elaborazioni già effettuate</strong>: questo è il punto di forza di Memcached; infatti raggruppando la cache dei nodi crea una memoria a breve termine che serve per ottimizzare le operazioni ripetute.</p>
<p>Memcached è semplice ma potente. Il suo design semplice promuove un&#8217;implementazione veloce, facilità di sviluppo, e risolve molti dei problemi che ci si trova ad affrontare quando si ha a che fare con grandi cache di dati.</p>
<p>Il server funziona ricevendo una serie di coppie chiave-valore e mantenendole in RAM.<br />
In genere è compito della logica applicativa (quindi della programmazione degli scripts php, ruby, phyton ecc&#8230;) decidere se effettuare un’operazione di scrittura su memcached oppure di lettura, ed e&#8217;sempre compito dell’applicazione computare un hash delle key che invia a memcached e, successivamente, inviare la coppia chiave-valore al server stesso.<br />
Nel caso di un cluster, l’applicazione deve determinare in base all’hash quale nodo memcached contiene quale valore.</p>
<p>Ora, può succedere che alcune coppie chiavi-valore siano molto più utilizzate di altre, queste si definiscono in gergo “hot keys”.<br />
Può succedere inoltre, nel caso che il sito sia molto trafficato, che i front-end web interroghino con preferenza alcune coppie chiave-valore specifiche.<br />
Facciamo un&#8217;altro esempio: immaginiamo di dover gestire la home page di un quotidiano nazionale (a me e&#8217; capitato).<br />
Immaginiamo che il codice che muove quel sito interroghi memcached per evitare che, ad ogni richiesta della home page, vengano fatte delle richieste al database.<br />
Immaginiamo infine che la home page del tuo portale riceva un grosso picco di traffico completamente inatteso (per esempio un terremoto).<br />
Man mano che il traffico aumenta, aumentano le richieste che i front-end devono effettuare al back-end memcached per evitare di interrogare continuamente i database.<br />
Per servire un sito di questo tipo, si sono probabilmente predisposti una mezza dozzina di front-end applicativi, o forse di più, e ciascuno di questi chiama il back-end memcache.<br />
Man mano che il traffico da servire lato pubblico scala verso le decine di Mbit/s, il traffico verso il backend memcached aumenta con un moltiplicatore pari al numero di front-end e questo comincia a saturare la scheda di rete del memcached.<br />
Il traffico aumenta fintanto che la scheda di rete si satura, il sistema crolla, con buona pace di ottimizzazioni lato front-end, bilanciatori di carico, e ottimizzazioni lato SQL.</p>
<p>Se avessimo configurato un cluster memcached alle spalle dei front-end il problema potrebbe comunque presentarsi perchè alcuni nodi del cluster potrebbero avere delle “hot-keys” un po più “hot” delle chiavi degli altri nodi.</p>
<p>Ora, potrebbe anche essere che i memcached contengano solo piccole porzioni di dato e quindi il traffico sulla NIC sia molto contenuto, ma se non siete stati voi ad aver scritto l’applicazione, non potrete esserne certi, quindi si dovra&#8217; quantomeno monitorare la saturazione della NIC e l’eventuale presenza di differenti hot keys sui server.</p>
<p><strong>Come uscirne fuori?</strong><br />
Se la situazione non si è ancora deteriorata del tutto, potreste effettuare l’analisi del traffico in uscita dalla NIC con un packet sniffer e cercare di capire quale sia la chiave “incriminata” e i dati ad essa associati.<br />
Ma c&#8217;e&#8217; da dire che state facendo passare qualche centinaio di Mbit/s su una NIC, un’attività del genere non deve essere una passeggiata anche solo per la mole di dati che si deve processare.<br />
In alternativa, può venirci in aiuto uno strumento come mctop, che permette di tracciare il numero di chiamate, richieste al secondo, e l’uso della banda per ogni singolo pacchetto.<br />
In questo modo, sara&#8217; molto più facile individuare le key che tendono a saturare la banda ed indicare dove ai programmatori o tecnici dove devono intervenire.</p>
<p><strong>Non è solo un problema lato server</strong>.<br />
Come si puo&#8217; immaginare, questo tipo di problemi va affrontato sia lato sistemi che lato sviluppo<br />
In una situazione di emergenza identificare una “hot key” manualmente, potra&#8217; anche andare bene, ma il punto è che dal lato sviluppo applicativo dovranno mettere mano al codice ed essere in grado di effettuare, per quanto possibile, questo tipo di operazione in autonomia migliorando le fasi di test e di pre produzione.<br />
Diventa cosi&#8217; davvero opportuno avere nella propria infrastruttura, dei sistemi di monitoraggio e di alert, che possano segnalare per tempo gli status ed i possibili rischi di saturazione lato NIC.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://tuttiperlinux.blog/2014/09/14/ottimizzare-grazie-a-memcached/feed/</wfw:commentRss>
			<slash:comments>1</slash:comments>
		
		
		
		<media:content url="https://2.gravatar.com/avatar/855ab7cb725a5b56c356471b79d1cef6?s=96&#38;d=&#38;r=G" medium="image">
			<media:title type="html">lordisil72lordisil72</media:title>
		</media:content>

		<media:content url="https://tuttiperlinux.files.wordpress.com/2014/09/theflash_memcached.jpg?w=300" medium="image">
			<media:title type="html">theflash_memcached</media:title>
		</media:content>
	</item>
	</channel>
</rss>
