<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	xmlns:georss="http://www.georss.org/georss" xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#" xmlns:media="http://search.yahoo.com/mrss/"
	>

<channel>
	<title>Backup &#38; Disaster Recovery &#8211; Tutti per Linux</title>
	<atom:link href="https://tuttiperlinux.blog/category/backup-disaster-recovery/feed/" rel="self" type="application/rss+xml" />
	<link>https://tuttiperlinux.blog</link>
	<description>Tutto cio&#039; che avresti sempre voluto capire su Linux ed il mondo Digitale</description>
	<lastBuildDate>Thu, 05 Aug 2021 14:36:33 +0000</lastBuildDate>
	<language>it-IT</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>http://wordpress.com/</generator>
<cloud domain='tuttiperlinux.blog' port='80' path='/?rsscloud=notify' registerProcedure='' protocol='http-post' />
<image>
		<url>https://secure.gravatar.com/blavatar/fa5c4cf69896031d9ec71ff8d5aafd25?s=96&#038;d=https%3A%2F%2Fs0.wp.com%2Fi%2Fbuttonw-com.png</url>
		<title>Backup &#038; Disaster Recovery &#8211; Tutti per Linux</title>
		<link>https://tuttiperlinux.blog</link>
	</image>
	<atom:link rel="search" type="application/opensearchdescription+xml" href="https://tuttiperlinux.blog/osd.xml" title="Tutti per Linux" />
	<atom:link rel='hub' href='https://tuttiperlinux.blog/?pushpress=hub'/>
	<item>
		<title>RESTIC il backup funzionale e cross platform</title>
		<link>https://tuttiperlinux.blog/2021/08/05/restic-il-backup-funzionale-e-cross-platform/</link>
		
		<dc:creator><![CDATA[Tutti per Linux]]></dc:creator>
		<pubDate>Thu, 05 Aug 2021 14:28:45 +0000</pubDate>
				<category><![CDATA[Backup & Disaster Recovery]]></category>
		<category><![CDATA[aws]]></category>
		<category><![CDATA[azure]]></category>
		<category><![CDATA[backup cross-platform]]></category>
		<category><![CDATA[cloud]]></category>
		<category><![CDATA[docker]]></category>
		<category><![CDATA[openstack]]></category>
		<guid isPermaLink="false">http://tuttiperlinux.blog/?p=1740</guid>

					<description><![CDATA[INTRODUZIONE &#8211;&#160;Restic è un&#8217;applicazione per la gestione di backup sia in locale che in cloud, che supporta la crittografazione (AES-256) e la deduplicazione dei dati, riducendo dunque in modo significativo lo spazio necessario per conservare i file bekappati. Restic è già ad oggi compatibile con la maggior parte dei servizi cloud quali : &#8220;OpenStack Swift, &#8230; <a href="https://tuttiperlinux.blog/2021/08/05/restic-il-backup-funzionale-e-cross-platform/">Continua a leggere <span class="meta-nav">&#8594;</span></a>]]></description>
										<content:encoded><![CDATA[
<figure class="wp-block-image"><img data-attachment-id="1760" data-permalink="https://tuttiperlinux.blog/databackup-1/" data-orig-file="https://tuttiperlinux.files.wordpress.com/2021/08/databackup-1.jpg" data-orig-size="768,432" data-comments-opened="0" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="databackup-1" data-image-description="" data-image-caption="" data-medium-file="https://tuttiperlinux.files.wordpress.com/2021/08/databackup-1.jpg?w=300" data-large-file="https://tuttiperlinux.files.wordpress.com/2021/08/databackup-1.jpg?w=600" src="https://tuttiperlinux.files.wordpress.com/2021/08/databackup-1.jpg" alt="" class="wp-image-1760" /></figure>



<h2><strong>INTRODUZIONE</strong></h2>



<p>&#8211;<strong>&nbsp;</strong>Restic è un&#8217;applicazione per la gestione di backup sia in locale che in cloud, che supporta la crittografazione (AES-256) e la deduplicazione dei dati, riducendo dunque in modo significativo lo spazio necessario per conservare i file bekappati.</p>



<p>Restic è già ad oggi compatibile con la maggior parte dei servizi cloud quali : &#8220;OpenStack Swift, bucket Amazon S3, Backblaze B2, Microsoft Azure Blob Storage, Google Cloud&#8221;, e sono presenti anche immagini Docker.</p>



<p>Restic è sviluppato in linguaggio GO, cosa che lo rende molto leggero ed efficiente, risolvendo anche molti problemi di gestione di dipendenze.</p>



<h2><strong>&#8211; INSTALLAZIONE</strong></h2>



<p>Esistono molti pacchetti di installazione per la maggior parte dei sistemi operativi, coprendo un range che va da Arch Linux a MacOS, fino ai sistemi *BSD/*NIX&#8230;&#8230;</p>



<p>Per i sistemi più &#8220;standard&#8221; l&#8217;installazione è banale:</p>



<p>&#8211;&nbsp;<strong>Debian</strong></p>



<p>apt-get install restic</p>



<p><strong>&#8211; Fedora</strong></p>



<p>dnf install restic</p>



<p><strong>&#8211; MacOS</strong></p>



<p>brew install restic</p>



<p>&#8230;.. per tutti gli altri sistemi si possono trovare tutte le specifiche sul sito ufficiale di Restic (<a href="https://restic.readthedocs.io/en/latest/020_installation.html#stable-releases" rel="nofollow">https://restic.readthedocs.io/en/latest/020_installation.html#stable-releases</a>)</p>



<p>Una volta installato il pacchetto i comandi per l&#8217;utilizzo di Restic sono davvero semplici ed immediati.</p>



<p>Prima di tutto va inizializzato lo spazio che si decide di stanziare, dedicare, al backup, ricordandosi che Restic chiama la destinazione per i backup &#8220;repository&#8221; ( &#8211;repo oppure -r ).</p>



<p>Quindi per inizializzare la Directory prescelta per la gestione dei backup possiamo agire in 3 modi diversi:</p>



<ul><li>spostarci all&#8217;interno della DIR prescelta e dare il comando # restic init</li><li>indicare il PATH dei backup # restic init &#8211;repo /mnt/data/&lt;nome_utente&gt;/backup/</li><li>indicare un percorso di rete # restic -r sftp:&lt;utente&gt;@&lt;indirizzo_IP&gt;:/mnt/data/&lt;nome_utente&gt;/backup init</li></ul>



<h3><strong>&#8211; COMANDI PRINCIPALI</strong></h3>



<ul><li>init</li><li>backup</li><li>ls</li><li>restore</li><li>snapshots</li><li>tag</li><li>copy</li><li>stats</li></ul>



<p>&#8230;&#8230;.. e molti altri ancora che potete trovare sulla documentazione ufficiale, al sito <a href="https://restic.readthedocs.io/en/stable/" target="_blank" rel="noreferrer noopener">restic-official-docu</a></p>



<p>Per poter automatizzare gli accessi ad aree esterne come, altri server, servizi cloud o altro, possiamo usare due metodi diversi;</p>



<p>1) creiamo un file <strong>.restic.env </strong>nel quale possiamo inserire i dati di accesso (es. ad AWS S3) , aggiungendo la password creata durante la fase di inizializzazione [&#8220;<strong>init</strong>&#8220;]</p>



<p>oppure</p>



<p>2) creiamo un file&nbsp;<strong>.rest_pass&nbsp;</strong>in cui inseriamo soltanto la password&nbsp;</p>



<p><strong>&#8211; ESEMPI</strong></p>



<p><strong>Es. file di tipo ENV ( .restic.env )</strong></p>



<p>#!/bin/bash</p>



<p>export RESTIC_REPOSITORY=&#8221; s3:<a href="https://s3.amazonaws.com/restic-backup-test" rel="nofollow">https://s3.amazonaws.com/restic-backup-test</a> &#8220;</p>



<p>export AWS_SECRET_ACCESS_KEY=&#8221;IVZ6GSBXEaZ1DeXzhN1gr4eCWcxD7hhMOt1RWMdn&#8221;</p>



<p>export RESTIC_PASSWORD=&#8221;&lt;PASSWD&gt;&#8221;</p>



<p> <strong>&#8211; </strong>Prima di lanciare i comandi per restic, in ambiente Cloud, eseguo il comando:<strong>  </strong></p>



<p><strong>source .restic.env</strong>  </p>



<p>per caricare le variabili d&#8217;ambiente indicate nel file .restic.env</p>



<p></p>



<p><strong>Es. file di tipo PASSWD ( .rest_pass )</strong></p>



<p>&lt; password &gt;</p>



<p>&#8230;.quando si decide di usare il file .rest_pass basta indicarlo alla fine della stringa di comando, come ad esempio:</p>



<p>restic -r sftp:&lt;utente&gt;@&lt;indirizzo_IP&gt;:/home/&lt;utente&gt;/backup/database snapshots -p .rest_pass</p>



<h3><strong>&#8211; Esempi Pratici</strong></h3>



<p><strong>INIZIALIZZO UNA DIRECTORY LOCALE</strong></p>



<p>.\restic.exe init &#8211;repo C:\Users\User\Desktop\restic-repo </p>



<p>enter password for new repository: </p>



<p>enter password again: </p>



<p>created restic repository 80ee4591fd at C:\Users\User\Desktop\restic-repo </p>



<p>Please note that knowledge of your password is required to access the repository. Losing your password means that your data is irrecoverably lost.</p>



<h3><strong>Esegui il BACKUP</strong></h3>



<p>.\restic.exe backup -r C:\Users\User\Desktop\restic-repo E:\TEST1.txt<br>enter password for repository:<br>repository 80ee4591 opened successfully, password is correct<br>created new cache in C:\Users\User\AppData\Local\restic<br></p>



<p>Files: 1 new, 0 changed, 0 unmodified<br>Dirs: 1 new, 0 changed, 0 unmodified<br>Added to the repo: 467 B</p>



<p>processed 1 files, 0 B in 0:00<br>snapshot 0161a85c saved</p>



<h3><strong>Vedere la lista degli snapshot effettuati</strong></h3>



<p>.\restic.exe snapshots -r C:\Users\User\Desktop\restic-repo<br>enter password for repository:<br>repository 80ee4591 opened successfully, password is correct</p>



<p>ID                        Time                          Host             Tags         Paths</p>



<p>0161a85c     2021-08-05 13:08:45    Windows10                      E:\TEST1.txt</p>



<p>1 snapshots</p>



<p></p>



<h2><strong>Vedere la lista dei files di una snapshot:</strong></h2>



<p>.\restic.exe ls -l -r C:\Users\User\Desktop\restic-repo 0161a85c<br>enter password for repository:<br>repository 80ee4591 opened successfully, password is correct<br>snapshot 0161a85c of [E:\TEST1.txt] filtered by [] at 2021-08-05 13:08:45.8317433 +0200 CEST):<br>drwxrwxrwx 0 0 0 1979-12-31 23:00:00 /E<br>-rw-rw-rw- 0 0 0 2021-08-05 13:07:20 /E/TEST1.txt</p>



<h3><strong>Esegui il Restore</strong></h3>



<p>Per effettuare un test reale, ho cancellato il file E:\TEST1.txt</p>



<p>.\restic.exe restore 0161a85c -r C:\Users\User\Desktop\restic-repo &#8211;target E:\restore<br>enter password for repository:<br>repository 80ee4591 opened successfully, password is correct<br>restoring to E:\restore</p>



<p>&#8230;.così facendo ho recuperato la copia di backup facendone il restore sul disco E:\restore</p>



<p>$ ls -l E:\restore</p>


<div class="wp-block-syntaxhighlighter-code "><pre class="brush: plain; title: ; notranslate">
Directory: E:\restore
</pre></div>


<p>Mode       LastWrite      Time       Length      Name<br>&#8212;- &#8212;&#8212;&#8212;&#8212;- &#8212;&#8212; &#8212;-<br>d&#8212;&#8211;      31/12/1979    23:00         0             TEST1.txt</p>



<h3><strong>Elimina gli snapshot</strong></h3>



<p>.\restic.exe forget &#8211;prune 0161a85c -r C:\Users\User\Desktop\restic-repo<br>enter password for repository:<br>repository 80ee4591 opened successfully, password is correct<br>[0:00] 100.00% 1 / 1 files deleted<br>1 snapshots have been removed, running prune<br>loading indexes…<br>loading all snapshots…<br>finding data that is still in use for 0 snapshots<br>[0:00] 0 snapshots<br>searching used packs…<br>collecting packs for deletion and repacking<br>[0:00] 100.00% 1 / 1 packs processed</p>



<p>to repack: 0 blobs / 0 B<br>this removes 0 blobs / 0 B<br>to delete: 2 blobs / 531 B<br>total prune: 2 blobs / 531 B<br>remaining: 0 blobs / 0 B<br>unused size after prune: 0 B ( of remaining size)</p>



<p>rebuilding index<br>[0:00] 0 packs processed<br>deleting obsolete index files<br>[0:00] 100.00% 1 / 1 files deleted<br>removing 1 old packs<br>[0:00] 100.00% 1 / 1 files deleted<br>done</p>



<p><strong>N.B.:</strong> bisogna ricordarsi che, nel caso stessimo agendo sull&#8217;eliminazione di un backup/snapshot in ambiente cloud, tipo Amazon Bucket S3, prima del comando di forget &#8211;prune bisognerà dare un &#8220;<strong>restic unlock &lt;ID dello snapshot&gt;</strong>&#8220;</p>



<h3><strong>Auto Pulizia</strong></h3>



<p>.\restic.exe forget &#8211;prune &#8211;keep-daily 7 &#8211;keep-monthly 12 &#8211;keep-yearly 3 -r C:\Users\User\Desktop\restic-repo<br>enter password for repository:<br>repository 80ee4591 opened successfully, password is correct<br>Applying Policy: keep 7 daily, 12 monthly, 3 yearly snapshots</p>



<h3><strong>Aggiorna la versione</strong></h3>



<p>Prima di tutto verifichiamo quale versione abbiamo al momento:</p>



<p>.\restic.exe version<br>restic 0.12.0 compiled with go1.15.8 on windows/amd64</p>



<p>oppure </p>



<p>$ restic version<br>restic 0.12.0 compiled with go1.15.8 on linux/amd64</p>



<p>Sulla macchina ArchLinux la versione è già l&#8217;ultima disponibile al momento (5 Agosto 2021) quindi non eseguiremo l&#8217;aggiornamento ma, ricordate che in caso di macchine nascoste da un Firewall a cui è vietato fare download di pacchetti si può comunque scaricare su di un&#8217;altra macchina l&#8217;ultima versione del software dal repository ufficiale su github , scompattarlo e sostituire il nuovo &#8220;restic&#8221; direttamente in /usr/bin</p>



<p><a href="https://github.com/restic/restic/releases/tag/v0.12.1" target="_blank" rel="noreferrer noopener">RESTIC Last Version Binaries Page</a></p>



<p>Es. :</p>



<h4>bunzip2 restic_0.12.0_linux_amd64.bz2</h4>



<p>mv restic_0.12.0_linux_amd64.bz2 restic</p>



<p>chmod +x restic</p>



<p>mv restic /usr/bin/</p>



<p></p>



<p>restic self-update</p>



<p></p>



<p>L&#8217;invito è quello di leggere la documentazione ufficiale poichè è davvero ricca di esempi, spiegazioni e modi di utilizzare questo fantastico strumento, ultra flessibile e davvero performante.</p>
]]></content:encoded>
					
		
		
		
		<media:content url="https://2.gravatar.com/avatar/855ab7cb725a5b56c356471b79d1cef6?s=96&#38;d=&#38;r=G" medium="image">
			<media:title type="html">lordisil72lordisil72</media:title>
		</media:content>

		<media:content url="https://tuttiperlinux.files.wordpress.com/2021/08/databackup-1.jpg" medium="image" />
	</item>
		<item>
		<title>Rsync e la sincronizzazione dei contenuti Web</title>
		<link>https://tuttiperlinux.blog/2015/02/16/rsync-e-la-sincronizzazione-dei-contenuti-web/</link>
					<comments>https://tuttiperlinux.blog/2015/02/16/rsync-e-la-sincronizzazione-dei-contenuti-web/#respond</comments>
		
		<dc:creator><![CDATA[Tutti per Linux]]></dc:creator>
		<pubDate>Mon, 16 Feb 2015 17:01:31 +0000</pubDate>
				<category><![CDATA[Backup & Disaster Recovery]]></category>
		<category><![CDATA[Tips & Tricks]]></category>
		<category><![CDATA[backup]]></category>
		<category><![CDATA[content manager]]></category>
		<category><![CDATA[crontab]]></category>
		<category><![CDATA[linux blog in italiano]]></category>
		<category><![CDATA[rsync]]></category>
		<category><![CDATA[system administrator]]></category>
		<category><![CDATA[ubuntu]]></category>
		<category><![CDATA[webserver]]></category>
		<category><![CDATA[xinetd]]></category>
		<guid isPermaLink="false">http://tuttiperlinux.com/?p=1012</guid>

					<description><![CDATA[Supponiamo che ci tocchi gestire in produzione un numero X di frontend Web dietro un bilanciatore e che quindi, ad ogni nuova release, si renda necessario caricare i contenuti su ciascuno di essi (rendendo la vita difficile agli sviluppatori). Certo il mercato e&#8217; ricco di software di Configuration Manager, ma in questo caso ho deciso di usare &#8230; <a href="https://tuttiperlinux.blog/2015/02/16/rsync-e-la-sincronizzazione-dei-contenuti-web/">Continua a leggere <span class="meta-nav">&#8594;</span></a>]]></description>
										<content:encoded><![CDATA[<p><div data-shortcode="caption" id="attachment_1013" style="width: 189px" class="wp-caption alignleft"><img loading="lazy" aria-describedby="caption-attachment-1013" data-attachment-id="1013" data-permalink="https://tuttiperlinux.blog/2015/02/16/rsync-e-la-sincronizzazione-dei-contenuti-web/rsync_aggiornamento/#main" data-orig-file="https://tuttiperlinux.files.wordpress.com/2015/02/rsync_aggiornamento.jpg" data-orig-size="590,347" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="rsync aggiornamento web" data-image-description="&lt;p&gt;rsync aggiornamento web&lt;/p&gt;
" data-image-caption="&lt;p&gt;Rsync aggiornamento Web&lt;/p&gt;
" data-medium-file="https://tuttiperlinux.files.wordpress.com/2015/02/rsync_aggiornamento.jpg?w=300" data-large-file="https://tuttiperlinux.files.wordpress.com/2015/02/rsync_aggiornamento.jpg?w=590" class=" wp-image-1013" src="https://tuttiperlinux.files.wordpress.com/2015/02/rsync_aggiornamento.jpg?w=150" alt="rsync aggiornamento web" width="179" height="105" srcset="https://tuttiperlinux.files.wordpress.com/2015/02/rsync_aggiornamento.jpg?w=150 150w, https://tuttiperlinux.files.wordpress.com/2015/02/rsync_aggiornamento.jpg?w=179 179w, https://tuttiperlinux.files.wordpress.com/2015/02/rsync_aggiornamento.jpg?w=358 358w, https://tuttiperlinux.files.wordpress.com/2015/02/rsync_aggiornamento.jpg?w=300 300w" sizes="(max-width: 179px) 100vw, 179px" /><p id="caption-attachment-1013" class="wp-caption-text">Rsync aggiornamento Web</p></div></p>
<p>Supponiamo che ci tocchi gestire in produzione un numero X di <strong>frontend</strong> Web dietro un bilanciatore e che quindi, ad ogni nuova release, si renda necessario caricare i contenuti su ciascuno di essi (rendendo la vita difficile agli sviluppatori).</p>
<p>Certo il mercato e&#8217; ricco di software di Configuration Manager, ma in questo caso ho deciso di usare come esempio l&#8217;automazione mediante l’uso di <strong>rsync</strong>, del resto non serve una Ferrari per fare la spesa. In pratica, i contenuti Web verranno caricati manualmente su un&#8217;unico <strong>frontend</strong> (che servirà da <strong>server</strong>) mentre le altre macchine fungeranno da <strong>client</strong> (ovvero aggiorneranno i loro contenuti ogni X minuti consultando direttamente la macchina server).</p>
<p><strong>Configurazione della macchina server</strong></p>
<p>Tale attività si articola in due fasi: la prima consiste nell’installazione e nella corretta configurazione del demone <strong>xinetd</strong> (evoluzione del celebre <strong>inetd</strong>), mentre la seconda riguarda solo ed esclusivamente <strong>rsync</strong>.</p>
<p>Procediamo dunque con l’installazione di <strong>xinetd</strong>:</p>
<pre>[root@server ~]# yum install xinetd</pre>
<p>ed impostiamo l’avvio automatico del demone in questione per i diversi <strong>runlevel</strong>:</p>
<pre>[root@server ~]# chkconfig --levels 2345 xinetd on</pre>
<p>Posizioniamoci nella dir <strong>/etc/xinetd.d</strong> ed apriamo in scrittura il file <strong>rsync</strong>, sostituendo la direttiva:</p>
<pre>disable = yes</pre>
<p>con</p>
<pre>disable = no</pre>
<p>In definitiva, il suddetto file, dovrà avere il seguente contenuto:</p>
<pre>service rsync
{
        disable = no
        flags           = IPv6
        socket_type     = stream
        wait            = no
        user            = root
        server          = /usr/bin/rsync
        server_args     = --daemon
        log_on_failure  += USERID
}</pre>
<p>Passiamo ora al secondo step relativo alla configurazione della macchina server, ovvero la creazione del file <strong>rsyncd.conf</strong> nella directory <strong>/etc</strong>:</p>
<pre>[root@server ~]# touch /etc/rsyncd.conf</pre>
<p>All’interno del suddetto file creeremo dei moduli ad-hoc contenenti tutte le direttive necessarie per la sincronizzazione dei contenuti tra <strong>server</strong> e <strong>client</strong>, ad esempio:</p>
<pre>log file = /var/log/rsyncd.log
pid file = /var/run/rsyncd.pid
lock file = /var/run/rsync.lock
[images]
   path = /var/www/html/images
   uid = root
   gid = root
   read only = no
   list = yes
   host allow = 10.11.12.0/24</pre>
<p>Salviamo il file ed avviamo <strong>xinetd</strong>:</p>
<pre>[root@server ~]# service xinetd start

</pre>
<p><strong>Configurazione delle macchine client</strong></p>
<p>Tale configurazione consiste esclusivamente nella creazione di una entry <strong>crontab</strong> del tipo:</p>
<pre>*/1 * * * *  root rsync -agruv root@10.11.12.1::images /var/www/html/images/</pre>
<p>ovvero ogni minuto viene contattato il server (<strong>10.11.12.1</strong>, modulo <strong>images</strong> che punta a<strong>/var/www/html/images/</strong>) e viene sincronizzato il contenuto della Dir del client <strong>/var/www/html/images/</strong>.</p>
<p>Bene, l&#8217;aggiornamento e&#8217; servito!</p>
<p>#RsyncSincronizzazione#AmbientiWeb</p>
]]></content:encoded>
					
					<wfw:commentRss>https://tuttiperlinux.blog/2015/02/16/rsync-e-la-sincronizzazione-dei-contenuti-web/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		
		<media:content url="https://2.gravatar.com/avatar/855ab7cb725a5b56c356471b79d1cef6?s=96&#38;d=&#38;r=G" medium="image">
			<media:title type="html">lordisil72lordisil72</media:title>
		</media:content>

		<media:content url="https://tuttiperlinux.files.wordpress.com/2015/02/rsync_aggiornamento.jpg?w=150" medium="image">
			<media:title type="html">rsync aggiornamento web</media:title>
		</media:content>
	</item>
		<item>
		<title>Rsnapshot Backup a riga di comando</title>
		<link>https://tuttiperlinux.blog/2014/12/14/782/</link>
					<comments>https://tuttiperlinux.blog/2014/12/14/782/#respond</comments>
		
		<dc:creator><![CDATA[Tutti per Linux]]></dc:creator>
		<pubDate>Sun, 14 Dec 2014 23:08:13 +0000</pubDate>
				<category><![CDATA[Backup & Disaster Recovery]]></category>
		<category><![CDATA[backup]]></category>
		<category><![CDATA[configtest]]></category>
		<category><![CDATA[cron]]></category>
		<category><![CDATA[debian]]></category>
		<category><![CDATA[mysql/media]]></category>
		<category><![CDATA[rsync]]></category>
		<category><![CDATA[scripts]]></category>
		<category><![CDATA[snapshot]]></category>
		<category><![CDATA[ubuntu]]></category>
		<guid isPermaLink="false">http://tuttiperlinux.com/?p=782</guid>

					<description><![CDATA[#Rsnapshot Backup incrementali a riga di comando rsnapshot e&#8217; un utile software per effettuare backup incrementali, grazie all&#8217;utilizzo di rsync ed il tutto da riga di comando. RSNAPSHOT I software in commercio, in grado di effettuare backup incrementali del nostro sistema operativo oppure delle nostre directory preferite, sono molti e vari. Ad esempio per effettuare &#8230; <a href="https://tuttiperlinux.blog/2014/12/14/782/">Continua a leggere <span class="meta-nav">&#8594;</span></a>]]></description>
										<content:encoded><![CDATA[<p><div data-shortcode="caption" id="attachment_786" style="width: 248px" class="wp-caption alignleft"><img loading="lazy" aria-describedby="caption-attachment-786" data-attachment-id="786" data-permalink="https://tuttiperlinux.blog/2014/12/14/782/rsnapshot2/#main" data-orig-file="https://tuttiperlinux.files.wordpress.com/2014/12/rsnapshot2.png" data-orig-size="238,230" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="rsnapshot" data-image-description="&lt;p&gt;Rsnapshot Backup a riga di comando&lt;/p&gt;
" data-image-caption="&lt;p&gt;Rsnapshot Backup a riga di comando&lt;/p&gt;
" data-medium-file="https://tuttiperlinux.files.wordpress.com/2014/12/rsnapshot2.png?w=238" data-large-file="https://tuttiperlinux.files.wordpress.com/2014/12/rsnapshot2.png?w=238" class="size-full wp-image-786" src="https://tuttiperlinux.files.wordpress.com/2014/12/rsnapshot2.png" alt="Rsnapshot Backup a riga di comando" width="238" height="230" srcset="https://tuttiperlinux.files.wordpress.com/2014/12/rsnapshot2.png 238w, https://tuttiperlinux.files.wordpress.com/2014/12/rsnapshot2.png?w=150&amp;h=145 150w" sizes="(max-width: 238px) 100vw, 238px" /><p id="caption-attachment-786" class="wp-caption-text">Rsnapshot Backup a riga di comando</p></div></p>
<p><strong>#Rsnapshot Backup incrementali a riga di comando<br />
</strong>rsnapshot e&#8217; un utile software per effettuare backup incrementali, grazie all&#8217;utilizzo di rsync ed il tutto da riga di comando.</p>
<p><strong>RSNAPSHOT</strong><br />
I software in commercio, in grado di effettuare backup incrementali del nostro sistema operativo oppure delle nostre directory preferite, sono molti e vari. Ad esempio per effettuare backup incrementali su Linux possiamo utilizzare Back In Time, Kup, Duplicati, TimeShift ecc. Per gli utemti che utilizzano Server Linux ma che preferiscono operare da terminale esiste <strong>rsnapshot</strong>, progetto open source che ci consente di effettuare backup incrementali grazie al tool <strong>rsync</strong>.</p>
<p>Attraverso rsnapshot possiamo effettuare backup incrementali di filesystem locali e remoti con numerose ed utili funzionalità.</p>
<p>Installare rsnapshot in Debian/Ubuntu e derivate è semplicissimo basta digitare da terminale:</p>
<pre>sudo apt-get install rsnapshot</pre>
<p>una volta installato dovremo operare sul file di configurazione in /etc/rsnapshot.conf<br />
<strong>Configurazione</strong></p>
<p>Per configurare rsnapshot è necessario aprire il file /etc/rsnapshot.conf con un editor di testo con i privilegi di amministrazione.</p>
<p>Ogni riga del file di configurazione dovrà contenere elementi separati dal carattere Tab e non dovrà contenere spazi. Non è quindi consigliabile fare il copia ed incolla delle seguenti istruzioni:</p>
<p>La seguente direttiva specifica la cartella di destinazione dei backup:</p>
<pre>rsnapshot_root   /media/backup/
no_create_root 1</pre>
<p>Si supponga di effettuare il backup tutti i giorni e di voler conservare le seguenti copie:</p>
<pre>backup giornaliero dei 7 giorni precedenti;
backup settimanale delle 4 settimane precedenti;
backup mensile dei 6 mesi precedenti.</pre>
<p>Le direttive di configurazione specifiche per una tale pianificazione sono le seguenti:</p>
<pre>interval daily 7
interval weekly 4
interval monthly 6</pre>
<p>Ora occorre definire le cartelle in cui fare i backup. Supponendo di voler conservare i file contenuti nelle cartelle /home /etc e /usr/local, nella cartella backup, aggiungere le seguenti istruzioni:</p>
<pre>### BACKUP POINTS / SCRIPTS ###
backup /home/ snapshot/
backup /etc/  snapshot/
backup /usr/local/ snapshot/</pre>
<p>Se invece si intende fare il backup di porzioni di file system di un sistema remoto, è possibile utilizzare il protocollo ssh, come nel seguente esempio:</p>
<pre>backup root@example.com:/home/ snapshot/example.com/</pre>
<p>Inoltre è possibile aggiungere direttive per l&#8217;inclusione e l&#8217;esclusione di file mediante il pattern matching così come specificato nella pagina di manuale di rsync. Suppondendo di voler escludere tutti i file .mp3 dal backup è sufficiente aggiungere la seguente direttiva:<br />
exclude *.mp3<br />
Infine, è possibile testare il file di configurazione digitando il seguente comando in una finestra del terminale:</p>
<pre>sudo rsnapshot configtest
# Syntax OK</pre>
<p><strong>Automatizzare il backup</strong><br />
È possibile effettuare il backup di vari servizi mediante degli script controllati da rsnapshot.</p>
<p>Supponendo di voler effetttuare il backup di un database MySql, si realizzi uno script, da inserire in un nuovo file (es. /root/scripts/backupmysql.sh), simile al seguente:</p>
<pre>mysqldump nomedatabase --user=root --password=passworddiroot &gt; dump.sql</pre>
<p>Dopo aver impostato il nome del database in «nomedatabse» e dopo aver impostato le opzioni «user» e «password» con il nome utente desiderato e la relativa password, è possibile richiamare lo script a partire dal file di configurazione sopra citato con un&#8217;istruzione simile alla seguente:</p>
<pre>backup_script /root/scripts/backupmysql.sh snapshot/mysql/</pre>
<p>rsnapshot lancerà lo script e sposterà nella cartella snapshot/mysql/ tutti i file di output prodotti nella cartella corrente.</p>
<h4 id="Avvio_del_programma"><strong>Avvio del programma</strong></h4>
<p class="line867"><strong>rsnapshot</strong> deve essere avviato specificando il tipo di backup che si intende utilizzare. Questo corrisponde ad una delle direttive «interval» sopra descritte.<span id="line-78" class="anchor"></span><span id="line-79" class="anchor"></span></p>
<p class="line874">Per avviare il tipo di backup desiderato digitare il relativo comando in una finestra di terminale:<span id="line-80" class="anchor"></span><span id="line-81" class="anchor"></span></p>
<ul>
<li>
<p class="line891"><strong>backup giornaliero</strong>:<span id="line-82" class="anchor"></span><span id="line-83" class="anchor"></span></p>
<pre><span id="line-1-8" class="anchor"></span>sudo rsnapshot daily</pre>
</li>
<li>
<pre><strong>backup settimanale</strong>:</pre>
<pre><span id="line-1-9" class="anchor"></span>sudo rsnapshot weekly</pre>
</li>
<li>
<pre><strong>backup mensile</strong>:</pre>
<pre><span id="line-1-10" class="anchor"></span>sudo rsnapshot monthly</pre>
<p>&nbsp;</li>
</ul>
<p class="line862"><strong>*</strong>Aggiungendo l&#8217;opzione <strong>-t</strong> al comando è possibile verificarne il corretto funzionamento. Quello che segue è un esempio:<span id="line-94" class="anchor"></span><span id="line-95" class="anchor"></span></p>
<p>test :</p>
<pre><span id="line-1-11" class="anchor"></span># sudo rsnapshot -t hourly
echo 24319 &gt; /var/run/rsnapshot.pid 
mkdir -m 0755 -p /media/backup/hourly.0/ 
/usr/bin/rsync -a --delete --numeric-ids --relative --delete-excluded \
 /home/user/Immagini /media/backup/hourly.0/snapshot/ 
touch /media/backup/hourly.0/</pre>
<p>Per maggiori informazioni su rsnapshot consiglio di consultare il <a href="http://wiki.ubuntu-it.org/AmministrazioneSistema/BackupDelSistema/Rsnapshot">Wiki ufficiale</a> di Ubuntu.<br />
<span id="line-96" class="anchor"></span></p>
]]></content:encoded>
					
					<wfw:commentRss>https://tuttiperlinux.blog/2014/12/14/782/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		
		<media:content url="https://2.gravatar.com/avatar/855ab7cb725a5b56c356471b79d1cef6?s=96&#38;d=&#38;r=G" medium="image">
			<media:title type="html">lordisil72lordisil72</media:title>
		</media:content>

		<media:content url="https://tuttiperlinux.files.wordpress.com/2014/12/rsnapshot2.png" medium="image">
			<media:title type="html">Rsnapshot Backup a riga di comando</media:title>
		</media:content>
	</item>
		<item>
		<title>Montare una cartella FTP</title>
		<link>https://tuttiperlinux.blog/2014/08/05/montare-una-cartella-ftp/</link>
					<comments>https://tuttiperlinux.blog/2014/08/05/montare-una-cartella-ftp/#respond</comments>
		
		<dc:creator><![CDATA[Tutti per Linux]]></dc:creator>
		<pubDate>Tue, 05 Aug 2014 19:00:48 +0000</pubDate>
				<category><![CDATA[Backup & Disaster Recovery]]></category>
		<category><![CDATA[backup]]></category>
		<category><![CDATA[cloud]]></category>
		<category><![CDATA[curlftp]]></category>
		<category><![CDATA[file system]]></category>
		<category><![CDATA[ftp]]></category>
		<category><![CDATA[linux]]></category>
		<category><![CDATA[repository]]></category>
		<category><![CDATA[ripristino]]></category>
		<category><![CDATA[storage]]></category>
		<guid isPermaLink="false">http://tuttiperlinux.wordpress.com/?p=274</guid>

					<description><![CDATA[FTP in tasca Sempre piu&#8217; spesso la mole di dati che ci troviamo a dover gestire ci impone di creare ed utilizzare i piu&#8217; svariati servizi di Cloud Storage presenti sul mercato, molti di questi offrono comode partizioni gestibili via FTP su cui spostare/upgradare tutti i nostri piu&#8217; preziosi ricordi. Come fare pero&#8217; ad organizzare &#8230; <a href="https://tuttiperlinux.blog/2014/08/05/montare-una-cartella-ftp/">Continua a leggere <span class="meta-nav">&#8594;</span></a>]]></description>
										<content:encoded><![CDATA[<p><div data-shortcode="caption" id="attachment_275" style="width: 170px" class="wp-caption alignleft"><a href="https://tuttiperlinux.files.wordpress.com/2014/08/curlftpfs.jpg"><img loading="lazy" aria-describedby="caption-attachment-275" data-attachment-id="275" data-permalink="https://tuttiperlinux.blog/2014/08/05/montare-una-cartella-ftp/curlftpfs/#main" data-orig-file="https://tuttiperlinux.files.wordpress.com/2014/08/curlftpfs.jpg" data-orig-size="160,136" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="curlftpfs" data-image-description="" data-image-caption="&lt;p&gt;CurlFTPfs&lt;/p&gt;
" data-medium-file="https://tuttiperlinux.files.wordpress.com/2014/08/curlftpfs.jpg?w=160" data-large-file="https://tuttiperlinux.files.wordpress.com/2014/08/curlftpfs.jpg?w=160" class="size-full wp-image-275" src="https://tuttiperlinux.files.wordpress.com/2014/08/curlftpfs.jpg" alt="CurlFTPfs" width="160" height="136" srcset="https://tuttiperlinux.files.wordpress.com/2014/08/curlftpfs.jpg 160w, https://tuttiperlinux.files.wordpress.com/2014/08/curlftpfs.jpg?w=150&amp;h=128 150w" sizes="(max-width: 160px) 100vw, 160px" /></a><p id="caption-attachment-275" class="wp-caption-text">CurlFTPfs</p></div></p>
<h3><strong>FTP in tasca<br />
</strong></h3>
<p>Sempre piu&#8217; spesso la mole di dati che ci troviamo a dover gestire ci impone di creare ed utilizzare i piu&#8217; svariati servizi di Cloud Storage presenti sul mercato, molti di questi offrono comode partizioni gestibili via FTP su cui spostare/upgradare tutti i nostri piu&#8217; preziosi ricordi.</p>
<p>Come fare pero&#8217; ad organizzare un sistema di backup e ripristino di questi dati, possibilmente rendendo l&#8217;operazione facile come scorrere il nostro file system locale ? . La soluzione potrebbe risiedere in un software, che permette di montare un server FTP come se fosse una normale directory del proprio filesystem.</p>
<p><span id="more-744"></span>Per fare questo è necssario installare <strong>curlftpfs</strong> dal proprio repository. In Ubuntu bastera&#8217; basta digitare:</p>
<pre>sudo apt-get install curlftpfs</pre>
<p>Una volta installato possiamo montare la nostra cartella ftp con il seguente comando:</p>
<pre>sudo curlftpfs -o user=<em>utente:password mio_server punto_di_mount</em></pre>
<p>Se per esempio il server fosse ftp.&lt;mio_server&gt;.it , con nome utente pippo e, con password pluto, il comando sarà:</p>
<pre>sudo curlftpfs -o user=pippo:pluto ftp.&lt;mio_server&gt;.it /media/scambio # il mio punto di mount</pre>
<p>Da questo momento in poi la mia cartella /media/scambio conterrà i files presenti sul server FTP e potranno essere copiati, spostati ed eliminati come se fossero presenti sul proprio filesystem. In questo modo, se si dovesse avere anche un minimo di conoscenza di programmazione della shell, si potra&#8217; creare uno script per il backup dell’intero disco/repository/sito (insomma di quello che volete) con pochissimi comandi, automatizzando il tutto.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://tuttiperlinux.blog/2014/08/05/montare-una-cartella-ftp/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		
		<media:content url="https://2.gravatar.com/avatar/855ab7cb725a5b56c356471b79d1cef6?s=96&#38;d=&#38;r=G" medium="image">
			<media:title type="html">lordisil72lordisil72</media:title>
		</media:content>

		<media:content url="https://tuttiperlinux.files.wordpress.com/2014/08/curlftpfs.jpg" medium="image">
			<media:title type="html">CurlFTPfs</media:title>
		</media:content>
	</item>
		<item>
		<title>Check Disk</title>
		<link>https://tuttiperlinux.blog/2014/06/30/check-disk/</link>
					<comments>https://tuttiperlinux.blog/2014/06/30/check-disk/#respond</comments>
		
		<dc:creator><![CDATA[Tutti per Linux]]></dc:creator>
		<pubDate>Mon, 30 Jun 2014 09:23:37 +0000</pubDate>
				<category><![CDATA[Backup & Disaster Recovery]]></category>
		<category><![CDATA[backup]]></category>
		<category><![CDATA[badblocks]]></category>
		<category><![CDATA[checkdisk]]></category>
		<category><![CDATA[disktype]]></category>
		<category><![CDATA[smarttools]]></category>
		<guid isPermaLink="false">http://tuttiperlinux.wordpress.com/?p=108</guid>

					<description><![CDATA[Salvaguardare lo stato di salute del disco : Gli Hard Disk sono una delle parti più delicate degli odierni pc, ed infatti sono tra le periferiche che più facilmente sono soggette a rompersi. Fortunantamente ci sono degli strumenti studiati per diagnosticare i malfunzionamenti prima ancora che possano creare danno. Ma ricordate che un backup periodico &#8230; <a href="https://tuttiperlinux.blog/2014/06/30/check-disk/">Continua a leggere <span class="meta-nav">&#8594;</span></a>]]></description>
										<content:encoded><![CDATA[<p><strong>Salvaguardare lo stato di salute del disco :</strong></p>
<p>Gli Hard Disk sono una delle parti più delicate degli odierni pc, ed infatti sono tra le periferiche che più facilmente sono soggette a rompersi.</p>
<p>Fortunantamente ci sono degli strumenti studiati per diagnosticare i malfunzionamenti prima ancora che possano creare danno. Ma ricordate che un backup periodico dei dati importanti è sempre la scelta migliore.</p>
<p>In questo articolo vedremo come usare alcuni strumenti come <strong>smartmontools</strong> e <strong>badblocks</strong> per monitorare lo stato di salute di un hard disk.</p>
<p><strong>*</strong> Controllare<strong> lo stato di salute di un HD:</strong> smartmontools</p>
<p>Gli smartmontools permettono di usare la funzionalità SMART di tutti i moderni HD grazie alla quale è possibile prevedere con 24 ore di anticipo la rottura di un HD.</p>
<p>In debian basta installare il pacchetto smartmontools:</p>
<pre># apt-get install smartmontools</pre>
<p><strong>* Analizzare lo stato dell&#8217;HD: </strong></p>
<p>Possiamo usare l&#8217;utility <strong>smartctl</strong> per analizzare lo stato dell&#8217;HD.</p>
<p>Innanzi tutto vediamo alcune informazioni generiche sul nostro HD:</p>
<pre> sudo smartctl --scan
/dev/sda -d scsi # /dev/sda, SCSI device
/dev/sdd -d scsi # /dev/sdd, SCSI device
</pre>
<pre> sudo smartctl -a /dev/sda  # questo ci permettera' di vedere ogni info sul disco in questione</pre>
<p>=== START OF INFORMATION SECTION ===<br />
Model Family: Western Digital Scorpio Blue Serial ATA<br />
Device Model: WDC WD5000BEVT-22ZAT0<br />
Serial Number: WD-WXNY08ND3649<br />
LU WWN Device Id: 5 0014ee 257a423e8<br />
Firmware Version: 01.01A01<br />
User Capacity: 500.107.862.016 bytes [500 GB]<br />
Sector Size: 512 bytes logical/physical<br />
Rotation Rate: 5400 rpm<br />
Device is: In smartctl database [for details use: -P show]<br />
ATA Version is: ATA8-ACS (minor revision not indicated)<br />
SATA Version is: SATA 2.6, 3.0 Gb/s<br />
Local Time is: Mon Jun 30 10:54:33 2014 CEST</p>
<pre>SMART support is: Available - device has SMART capability.
SMART support is: Enabled</pre>
<p>oltre alle informazioni generiche, dalle ultime due righe si capisce che l&#8217;HD supporta la tecnologia SMART e che il supporto è attivato. Se non fosse attivato basterebbe questo comando:</p>
<pre>sudo smartctl -s on /dev/sda</pre>
<p>per attivare il supporto SMART.</p>
<p>E&#8217; anche possibile effettuare dei test più o meno approfonditi sul disco. Alcuni test si possono effettuare con l&#8217;HD montato e funzionate, ed il test stesso avrà un impatto minimo o nullo sulle prestazioni del sistema.</p>
<p>Per effettuare un test:</p>
<pre>sudo smartctl -t &lt;tipo_test&gt; /dev/sda</pre>
<p>dove tipo_test può essere:</p>
<p><strong>short</strong><br />
effettua un test sul disco di durata inferiore a 10 minuti, può essere eseguito durante il normale funzionamento e non impatta le prestazioni. Questo test controlla le performace meccaniche ed elettriche del disco, oltre che le performance in lettura.</p>
<p><strong>long</strong><br />
effettua un test di durata da 40 minuti ad un ora (a seconda del disco). Può essere effettuato durante il normale funzionamento del disco e non ha impatto sulle prestazioni. Questo test è una versione più estesa dello short test.</p>
<p><strong>conveyance</strong><br />
effettua un test di alcuni minuti atto a scoprire difetti dovuti ad incurie nel trasporto dell&#8217;HD. Può essere eseguito durante il normale funzionamento dell&#8217;HD.</p>
<p>Esistono anche altri tipi di test per i quali si rimanda alla simpatica pagina di manuale: man smartctl.</p>
<p>I risultati di questi test vengono riportati nella parte finale dell&#8217;output di smartctl -a /dev/sda, come notato in precedenza.</p>
<p><strong>Controllo automatizzato :</strong></p>
<p>E&#8217; possibile attivare il demone smartd fornito dal pacchetto smartmontools per monitorare in continuazione lo stato di salute dell&#8217;HD e notificare ogni anomalia immediatamente tramite syslog.</p>
<p>Normalmente il demone è disabilitato. Per abilitarlo bisogna editare il file /etc/default/smartmontools e decommentare la riga:</p>
<p><strong>start_smartd=yes</strong></p>
<p>Dobbiamo inoltre configurare <em>smartd</em> per deciderne il suo comportamento. A tal scopo editiamo il file /etc/smartd.conf. Leggendo i commenti nel file e l&#8217;amichevole pagina di manuale (man smartd.conf) è possibile scegliere quali parametri smartd debba monitorare, programmare dei test automatici, e decidere quali azioni intraprendere in caso di errore.</p>
<p>Nel mio caso ho inserito solo la seguente linea per il solo disco di sistema:</p>
<pre>/dev/sda -a -o on -S on</pre>
<p>che attiva il monitoraggio di tutti (-a) i parametri, abilitia l&#8217; automatic online data collection (-o on), e abilita il salvataggio degli attributi (-S on) in modo che le informazioni di log di SMART vengano memorizzare nella FLASH del disco e siano disponibili anche dopo il riavvio.</p>
<p><strong>Verifica di settori corrotti con BadBlocks : </strong></p>
<p><strong>**</strong> Data lapotenza dell&#8217;utility che va a lavorare davvero a basso livello se ne consiglia l&#8217;uso solo nei casi in cui l&#8217;hard disk risulta gia&#8217; compromesso e comunque soltanto dopo aver gia&#8217; effettuato un backup (come precedentemente spiegato). L&#8217;utility badblocks permette di fare un controllo di basso livello per vedere se su una partizione sono presenti dei settori danneggiati.</p>
<p>I moderni HD  fanno un controllo automatico degli errori e sono in grado di segnare dei settori corrotti che di conseguenza non verranno più usati. Questo rende in parte inutile badblocks, ma se si effettua un controllo e dei settori risultano danneggiati vuol dire che probabilmente la superficie del disco contiene così tanti settori danneggiati che la circuiteria di controllo non è più in gradio di gestirli.</p>
<p>Per effettuare un controllo con badblocks e&#8217; preferibile lavorare sui dischi usando una LiveCD da cui eseguiremo:</p>
<pre># badblocks -b dimensione_blocco /dev/sdaX</pre>
<p>dove /dev/sdaX è la partizione da controllare. Il parametro dimensione_blocco è la dimensione del blocco usata dal filesytem espresso in byte. Di solito è 4096 (ovvero 4KB), per controllare potete usare:</p>
<pre># disktype /dev/sda</pre>
<p>** Per le ulteriori opzioni di badblocks si rimanda all&#8217;amichevole pagina di manuale, ma <strong>attenzione: l&#8217;opzione -w distruggerà tutti i dati sulla vostra partizione.<br />
Non usatela se non volete che ciò accada.</strong></p>
<p>* Leggi anche ( &#8220;<a title="Estraiamo i nostri dati" href="https://tuttiperlinux.wordpress.com/2014/06/25/estraiamo-i-nostri-dati/"> estraiamo i nostri dati</a> &#8221; )</p>
]]></content:encoded>
					
					<wfw:commentRss>https://tuttiperlinux.blog/2014/06/30/check-disk/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		
		<media:content url="https://2.gravatar.com/avatar/855ab7cb725a5b56c356471b79d1cef6?s=96&#38;d=&#38;r=G" medium="image">
			<media:title type="html">lordisil72lordisil72</media:title>
		</media:content>
	</item>
		<item>
		<title>Sfdisk salvare le partizioni</title>
		<link>https://tuttiperlinux.blog/2014/06/27/sfdisk-salvare-le-partizioni/</link>
					<comments>https://tuttiperlinux.blog/2014/06/27/sfdisk-salvare-le-partizioni/#respond</comments>
		
		<dc:creator><![CDATA[Tutti per Linux]]></dc:creator>
		<pubDate>Fri, 27 Jun 2014 08:59:02 +0000</pubDate>
				<category><![CDATA[Backup & Disaster Recovery]]></category>
		<category><![CDATA[distro]]></category>
		<category><![CDATA[linux]]></category>
		<category><![CDATA[mirror]]></category>
		<category><![CDATA[partizioni]]></category>
		<category><![CDATA[raid]]></category>
		<category><![CDATA[sfdisk]]></category>
		<category><![CDATA[testdisk]]></category>
		<guid isPermaLink="false">http://tuttiperlinux.wordpress.com/?p=92</guid>

					<description><![CDATA[Salvare la tabella della partizioni Anche se l&#8217;uso di TestDisk ci aiuta a ripristinare eventuali partizioni perse, ritrovarsi con una tabella della partizioni scombinata puo&#8217; richiedere  parecchio tempo per essere sistemata. Sarebbe molto meglio (come gia suggerito nei precedente articolo ( &#8220;testdisk e le partizioni&#8221;  ) averne gia salvata una in ordine&#8230;, in questi casi &#8230; <a href="https://tuttiperlinux.blog/2014/06/27/sfdisk-salvare-le-partizioni/">Continua a leggere <span class="meta-nav">&#8594;</span></a>]]></description>
										<content:encoded><![CDATA[<p><strong>Salvare la tabella della partizioni</strong></p>
<p>Anche se l&#8217;uso di TestDisk ci aiuta a ripristinare eventuali partizioni perse, ritrovarsi con una tabella della partizioni scombinata puo&#8217; richiedere  parecchio tempo per essere sistemata. Sarebbe molto meglio (come gia suggerito nei precedente articolo ( &#8220;<a title="TestDisk e le partizioni" href="https://tuttiperlinux.wordpress.com/2014/06/27/testdisk-e-le-partizioni/">testdisk e le partizioni</a>&#8221;  ) averne gia salvata una in ordine&#8230;, in questi casi e&#8217; una buona idea usare <strong>sfdisk</strong> ogni volta che installate o rimuovete una distro, o comunque ogni qual volta facciate delle modifiche alle partizioni.</p>
<p><strong>Sfdisk</strong> e&#8217; una piccola utility da riga di comando, gia&#8217; inclusa in tutte le recenti distro Linux, in grado di fare il backup ed il ripristino delle tabelle delle partizioni, oltre a poterle modificare a piacimento/necessita&#8217;.</p>
<pre>Ad esempio il comando: <strong>sudo sfdisk -d /dev/sda &gt; sda_tabella.txt
</strong></pre>
<p>effettuera&#8217; una copia di sicurezza della tabella delle partizioni del disco <strong>sda</strong> all&#8217;interno del file di testo che dovrete tenere in un posto ben al sicuro.</p>
<pre>Al contrario il comando : <strong>sudo sfdisk /dev/sda &lt;</strong> <strong>sda_tabella.txt</strong></pre>
<p>leggera&#8217; il file di testo e ripristinera&#8217; la tabella dele partizioni all&#8217;interno dell&#8217;<strong>MBR </strong>di &#8220;sda&#8221; . Nel caso in cui abbiate un sistema di gestione dischi in <strong>RAID, </strong>potete comunque fare il mirror di una tabella delle partizioni da un disco all&#8217;altro usando</p>
<pre><strong>sudo sfdisk -d /dev/sda | /dev/sdb</strong></pre>
<p>&nbsp;</p>
]]></content:encoded>
					
					<wfw:commentRss>https://tuttiperlinux.blog/2014/06/27/sfdisk-salvare-le-partizioni/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		
		<media:content url="https://2.gravatar.com/avatar/855ab7cb725a5b56c356471b79d1cef6?s=96&#38;d=&#38;r=G" medium="image">
			<media:title type="html">lordisil72lordisil72</media:title>
		</media:content>
	</item>
		<item>
		<title>TestDisk e le partizioni</title>
		<link>https://tuttiperlinux.blog/2014/06/27/testdisk-e-le-partizioni/</link>
					<comments>https://tuttiperlinux.blog/2014/06/27/testdisk-e-le-partizioni/#comments</comments>
		
		<dc:creator><![CDATA[Tutti per Linux]]></dc:creator>
		<pubDate>Fri, 27 Jun 2014 08:24:09 +0000</pubDate>
				<category><![CDATA[Backup & Disaster Recovery]]></category>
		<category><![CDATA[analyse]]></category>
		<category><![CDATA[fdisk]]></category>
		<category><![CDATA[partizioni]]></category>
		<category><![CDATA[photorec]]></category>
		<category><![CDATA[testdisk]]></category>
		<guid isPermaLink="false">http://tuttiperlinux.wordpress.com/?p=82</guid>

					<description><![CDATA[Usare TestDisk capendo cosa sono le partizioni Per poter usare con successo TestDisk occorre capire prima come sono organizzate le partizioni ed i dischi. Una tabella delle partizioni contiene quattro slot di 16 byte l&#8217;uno, che limitano ad un numero di 4 le partizioni &#8220;primarie&#8221; che possiamo creare su di un hard-disk. Di regola una &#8230; <a href="https://tuttiperlinux.blog/2014/06/27/testdisk-e-le-partizioni/">Continua a leggere <span class="meta-nav">&#8594;</span></a>]]></description>
										<content:encoded><![CDATA[<p><strong>Usare TestDisk capendo cosa sono le partizioni</strong></p>
<p>Per poter usare con successo TestDisk occorre capire prima come sono organizzate le partizioni ed i dischi. Una tabella delle partizioni contiene quattro slot di <em>16 byte</em> l&#8217;uno, che limitano ad un numero di 4 le partizioni &#8220;primarie&#8221; che possiamo creare su di un hard-disk. Di regola una di queste 4 partizioni viene quindi creata come &#8220;estesa&#8221;  poiche&#8217; in questo modo al suo interno potremo creare altre di tipo &#8220;logiche&#8221;. Per esempio potremo aver creato 3 partizioni primarie (sda1, sda2, sda3) ed una quarta in modalita&#8217; estesa, che contiene al suo interno diverse altre partizioni logiche (sda5, sda6&#8230;).</p>
<p>A volte potra&#8217; capitare che TestDisk non riesca a dettagliare correttamente la posizione di una determinata partizione, a quel punto dovrete trovare voi quella corretta e dovrete anche capire se si tratta di logica o primaria, tenendo presente che , ad esempio, la prima partizione primaria, in genere, inizia al cilindro 0,  testina 1, settore 1 &#8230;..ecc&#8230;.</p>
<pre>Sarebbe sempre buona norma dopo ogni installazione farsi una copia 
delle partizioni del/dei disco, con un <strong>fdisk -l</strong>
in modo tale da avere in caso di emergenza un'immagine chiara delle 
partizioni presenti sulla nostra macchina.
</pre>
<p>Per esempio:</p>
<pre>/dev/sdb1 * 2048 952197119 476097536 83 Linux
/dev/sdb2 952199168 976771055 12285944 82 Linux swap / Solaris

/dev/sdc1 2048 304203775 152100864 83 Linux
/dev/sdc2 304205822 312580095 4187137 5 Esteso
/dev/sdc5 304205824 312580095 4187136 82 Linux swap / Solaris
</pre>
<p>&nbsp;</p>
<p><strong>TESTDISK </strong>: probabilmente il miglior tool in circolazione per sistemare le tabelle delle partizioni e permettere, ai dischi che non riescono piu&#8217; ad effettuare il boot, di tornare in servizio. L&#8217;uso di testdisk e&#8217; simile a quello di photorec, ad esempio una volta avviato vi chiedera&#8217; di creare un file di log (che puo&#8217; tornare sempre utile per successive ed eventuali analisi qualora l&#8217;operazione di recovery dovesse fallire) dopo di che mostrera&#8217; tutti i dischi collegati al computer. Dopo che avrete selezionato il disco in cui e&#8217; &#8220;sparita&#8221; la vostra partizione vi chiedera&#8217; di selezionare la tipologia, per esempio Mac, Intel, Sun e cosi&#8217; via, subito dopo verranno mostrate tutte le opzioni di recovery disponibili. Consiglio di selezionare quella di default <strong>Analyse</strong>, che legge la struttura delle partizioni e cerca quelle disperse. Alla fine della ricerca verra&#8217; visualizzata la struttura delle partizioni corrente (da qui in avanti aver avuto l&#8217;immagine delle partizioni subito dopo aver effettuato l&#8217;installazione avrebbe sicuramente facilitato tutti i prossimi passaggi). Ora potrete selezionare l&#8217;opzione <strong>Quick Search</strong> per chiedere a testdisk di ricercare le partizioni cancellate. In base all&#8217;eta&#8217; del disco, testdisk visualizzera&#8217; un diverso numero di partizioni, per poter capire quale&#8217; quella corretta da recuperare guardate le Label delle partizioni mostrate alla fine di ogni voce, tra le parentesi quadre. Se questo non dovesse essere del tutto d&#8217;aiuto potrete provare, premendo il taso <strong>P</strong> su di una partizione, a leggere l&#8217;elenco dei file che testdisk ha trovato in essa. Quando avrete trovato la partizione che v&#8217;interessa converra&#8217; copiarne i dati, giusto nel caso in cui testdisk fallisca la sua operazione di recupero, per poter fare cio&#8217; premete nuovamente il tasto <strong>P</strong> e successivamente , con il tasto <strong>a </strong>, selezionate tutti i file. A questo punto premete il tasto <strong>C</strong> per effettuare la copia cosi&#8217; che il wizard possa chiedervi dove volete salvarli. Terminata la copia premete il tasto <strong>q</strong> per tornare all&#8217;elenco delle partizioni, ora premete il tasto <strong>E</strong> per continuare nelle operazioni di ripristino, in questo modo testdisk mostrera&#8217; nuovamente la struttura delle partizioni, questa volta aggiungendo quella scomparsa, ora si potra&#8217; selezionare con il tasto <strong>W</strong> l&#8217;opzione di &#8216;write&#8217; per salvare la tabella delle partizioni cosi recuperata sul disco ed uscire dal programma.</p>
<p>* Leggi anche ( &#8221; <a title="Ripristinare file cancellati" href="https://tuttiperlinux.wordpress.com/2014/06/25/ripristinare-file-cancellati/">ripristinare file cancellati</a> &#8221; )</p>
]]></content:encoded>
					
					<wfw:commentRss>https://tuttiperlinux.blog/2014/06/27/testdisk-e-le-partizioni/feed/</wfw:commentRss>
			<slash:comments>1</slash:comments>
		
		
		
		<media:content url="https://2.gravatar.com/avatar/855ab7cb725a5b56c356471b79d1cef6?s=96&#38;d=&#38;r=G" medium="image">
			<media:title type="html">lordisil72lordisil72</media:title>
		</media:content>
	</item>
		<item>
		<title>Ripristinare file cancellati</title>
		<link>https://tuttiperlinux.blog/2014/06/25/ripristinare-file-cancellati/</link>
					<comments>https://tuttiperlinux.blog/2014/06/25/ripristinare-file-cancellati/#comments</comments>
		
		<dc:creator><![CDATA[Tutti per Linux]]></dc:creator>
		<pubDate>Wed, 25 Jun 2014 11:45:29 +0000</pubDate>
				<category><![CDATA[Backup & Disaster Recovery]]></category>
		<category><![CDATA[7zip]]></category>
		<category><![CDATA[deb]]></category>
		<category><![CDATA[filesystem]]></category>
		<category><![CDATA[hard disk]]></category>
		<category><![CDATA[odf]]></category>
		<category><![CDATA[open source]]></category>
		<category><![CDATA[pdf]]></category>
		<category><![CDATA[photorec]]></category>
		<category><![CDATA[rpm]]></category>
		<category><![CDATA[sdd]]></category>
		<category><![CDATA[tar]]></category>
		<category><![CDATA[usb]]></category>
		<category><![CDATA[wizard]]></category>
		<category><![CDATA[zip]]></category>
		<guid isPermaLink="false">http://tuttiperlinux.wordpress.com/?p=74</guid>

					<description><![CDATA[Tutti gli strumenti visti nei precedenti articoli vengono utilizzati principalmente per recuperare files da dischi rovinati o prossimi alla rottura. Non sempre la causa dei nostri mal di testa e&#8217; imputabile ad un guasto hardware ma spesso siamo noi stessi causa del nostro male. Un utente goffo, distratto o alle prime armi puo&#8217; causarsi da &#8230; <a href="https://tuttiperlinux.blog/2014/06/25/ripristinare-file-cancellati/">Continua a leggere <span class="meta-nav">&#8594;</span></a>]]></description>
										<content:encoded><![CDATA[<p>Tutti gli strumenti visti nei precedenti articoli vengono utilizzati principalmente per recuperare files da dischi rovinati o prossimi alla rottura. Non sempre la causa dei nostri mal di testa e&#8217; imputabile ad un guasto hardware ma spesso siamo noi stessi causa del nostro male. Un utente goffo, distratto o alle prime armi puo&#8217; causarsi da solo la perdita di dati; che cosa fare in questi casi ?? Bisogna prima di tutto capire che quando viene cancellato un file  esso non viene eliminato fisicamente, piuttosto il filesystem lo &#8220;marca&#8221; come cancellato rendendo cosi&#8217; disponibile alla scrittura di altri file la porzione di disco che questo occupava. Questo vuol dire che finche&#8217; un&#8217;applicazione non usera&#8217; quella porzione di disco il file sara&#8217; comunque presente e&#8217; recuperabile, per questo come gia&#8217; accennato in un precedente articolo, se vi accorgete di aver cancellato qualcosa e&#8217; importante ridurre al minimo possibile l&#8217;utilizzo del sistema fino a che non si sara&#8217; tentato il recupero dei dati cancellati. Probabilmente , ad oggi, il tool OpenSource piu&#8217; completo per questo genere di attivita&#8217; e&#8217; senz&#8217;altro <strong>PhotoRec</strong> , questo tool e&#8217; in grado di andare a caccia dei formati di file immagine piu&#8217; comuni ed inoltre e&#8217; in grado di ripristinare file in molti altri formati quali : <strong>odf, pdf, 7zip, zip, tar, rpm, deb</strong>&#8230; ed anche <strong>dischi virtuali</strong>. Questa utility e&#8217; in grado di funzionare su ogni tipologia di disco, inclusi hard disk, chiavette usb ed anche schede sdd. PhotoRec e&#8217; anche in grado di recuperare file da partizioni che sono state formattate. Aggiungo che per quanto sia un tool da riga di comando PhotoRec  suddivide le operazioni di salvataggio in piccoli passi, proprio come farebbe un wizard grafico. Per avviare PhotoRec bastera&#8217; il semplice comando :</p>
<ul>
<li><strong>sudo photorec</strong></li>
</ul>
<p>Appena avviato photorec  vi chiedera&#8217;, nel seguente ordine, queste informazioni :</p>
<ul>
<li>selezionare il disco e la partizione che ospita i file cancellati # [No partition] per indicarle tutte</li>
<li>selezionare il tipo di filesystem</li>
<li>selezionare &#8220;Search&#8221; per recuperare tutti i file oppure &#8220;Opt&#8221; per selezionare le tipologie</li>
<li>selezionare i formati dei file che c&#8217;interessa recuperare dall&#8217;elenco proposto</li>
<li>selezionare la Directory in cui salvare i file recuperati</li>
</ul>
<p>Il tempo impiegato dipendera&#8217; ovviamente dalla grandezza della partizione selezionata e dalla quantita&#8217; di file da recuperare. Una volta ultima l&#8217;operazione troverete nella cartella indicata in fase di avvio una quantita&#8217; di file con nomi strani, questo perche&#8217; PhotoRec nomina i file a suo modo man mano che li trova e lascia all&#8217;utente il compito di riordinarli.</p>
<p>** Leggi anche ( &#8221; <a title="Estraiamo i nostri dati" href="https://tuttiperlinux.wordpress.com/2014/06/25/estraiamo-i-nostri-dati/">estraiamo i nostri dati </a>&#8221; )</p>
]]></content:encoded>
					
					<wfw:commentRss>https://tuttiperlinux.blog/2014/06/25/ripristinare-file-cancellati/feed/</wfw:commentRss>
			<slash:comments>1</slash:comments>
		
		
		
		<media:content url="https://2.gravatar.com/avatar/855ab7cb725a5b56c356471b79d1cef6?s=96&#38;d=&#38;r=G" medium="image">
			<media:title type="html">lordisil72lordisil72</media:title>
		</media:content>
	</item>
		<item>
		<title>Estraiamo i nostri dati</title>
		<link>https://tuttiperlinux.blog/2014/06/25/estraiamo-i-nostri-dati/</link>
					<comments>https://tuttiperlinux.blog/2014/06/25/estraiamo-i-nostri-dati/#comments</comments>
		
		<dc:creator><![CDATA[Tutti per Linux]]></dc:creator>
		<pubDate>Wed, 25 Jun 2014 10:48:38 +0000</pubDate>
				<category><![CDATA[Backup & Disaster Recovery]]></category>
		<category><![CDATA[foremost]]></category>
		<category><![CDATA[image]]></category>
		<category><![CDATA[mount]]></category>
		<category><![CDATA[rescued]]></category>
		<category><![CDATA[scalpel]]></category>
		<category><![CDATA[sudo]]></category>
		<guid isPermaLink="false">http://tuttiperlinux.wordpress.com/?p=64</guid>

					<description><![CDATA[Ora siamo i felici possessori di una o piu&#8217; immagini su cui abbiamo salvato i nostri preziosi files ma cosa fare adesso per  poterli riutilizzare ??? La prima cosa da fare e&#8217; quella di montare l&#8217;immagine su di un&#8217;altro PC Linux oppure tramite l&#8217;uso della LiveCD rimanere sul PC da cui abbiamo generato il tutto e &#8230; <a href="https://tuttiperlinux.blog/2014/06/25/estraiamo-i-nostri-dati/">Continua a leggere <span class="meta-nav">&#8594;</span></a>]]></description>
										<content:encoded><![CDATA[<p>Ora siamo i felici possessori di una o piu&#8217; immagini su cui abbiamo salvato i nostri preziosi files ma cosa fare adesso per  poterli riutilizzare ???</p>
<p>La prima cosa da fare e&#8217; quella di montare l&#8217;immagine su di un&#8217;altro PC Linux oppure tramite l&#8217;uso della LiveCD rimanere sul PC da cui abbiamo generato il tutto e montare l&#8217;immagine su di un supporto esterno (disco, chiavetta ecc..) su cui spostare man mano i dati recuperati. Quest&#8217;operazione si puo&#8217; facilmente effettuare tramite il comando :</p>
<p><strong>sudo mount -o loop /media/drive-di-backup/sdd1.image /media/recovery</strong></p>
<p>Ora possiamo dare un&#8217;occhiata dentro /media/recovery dentro cui dovreste poter vedere tutti i dati precedentemente salvati ed esportarli/copiarli su di un nuovo supporto o PC. Se invece il comando precedente non dovesse aver dato i suoi frutti bisognera&#8217; passare alle maniere piu&#8217; forti chiamando in causa dei tool piu&#8217; specifici come <strong>Foremost </strong>e <strong>Scalpel.</strong> Entrambi sono delle utility che, e&#8217; il caso di dire, &#8220;vanno a caccia dei files&#8221; utilizzando vari formati di header e footer . Foremost e&#8217; il piu&#8217; semplice dei due da usare ma spesso e&#8217; anche il meno efficiente :</p>
<p><strong>sudo foremost -t all -i /media/drive-di-backup/sdd1.image -v -o rescued-file</strong></p>
<p>in pratica le opzioni utilizzate sono le seguenti : <strong>-t </strong>all = vogliamo tutti i tipi di files ( nel caso volessimo recuperare soltanto alcuni formati potremo modificare questa opzione nel seguente modo : <strong>-t </strong>jpg,png,tiff ) ; <strong>-i </strong>&lt;immagine.image&gt; = la nostra immagine di backup ; <strong>-v</strong> = verbose mode (per vedere cosa viene fatto) ; <strong>-o</strong> rescued-file = nome della cartella che foremost creera&#8217; per metterci tutti i files che riuscira&#8217; a recuperare. Sul manuale di foremost dichiarano che in caso di filesystem di tipo ext2 bisognera&#8217; aggiungere l&#8217;opzione <strong>-d</strong>.</p>
<p>Se foremost non dovesse aver soddisfatto le vostre aspettative possiamo far scendere in campo Scalpel il quale pero&#8217; prima di essere utilizzato ha bisogno di alcune modifiche nel suo file di configurazione [ /etc/scalpel/scalpel.conf ] all&#8217;interno del quale andranno decommentati tutti i formati di file che vogliamo far recuperare. Una volta terminata questa fase preparatoria potremo utilizzare scalpel nel seguente modo :</p>
<p><strong>sudo scalpel</strong> <strong>/media/drive-di-backup/sdd1.image -o rescued-file</strong></p>
<p>&nbsp;</p>
<p>** Leggi anche  ( &#8221; <a title="Copia Bit a Bit" href="https://tuttiperlinux.wordpress.com/2014/06/24/copia-bit-a-bit/">copia bit a bit</a> &#8221; )</p>
]]></content:encoded>
					
					<wfw:commentRss>https://tuttiperlinux.blog/2014/06/25/estraiamo-i-nostri-dati/feed/</wfw:commentRss>
			<slash:comments>2</slash:comments>
		
		
		
		<media:content url="https://2.gravatar.com/avatar/855ab7cb725a5b56c356471b79d1cef6?s=96&#38;d=&#38;r=G" medium="image">
			<media:title type="html">lordisil72lordisil72</media:title>
		</media:content>
	</item>
		<item>
		<title>Copia Bit a Bit</title>
		<link>https://tuttiperlinux.blog/2014/06/24/copia-bit-a-bit/</link>
					<comments>https://tuttiperlinux.blog/2014/06/24/copia-bit-a-bit/#comments</comments>
		
		<dc:creator><![CDATA[Tutti per Linux]]></dc:creator>
		<pubDate>Tue, 24 Jun 2014 10:03:12 +0000</pubDate>
				<category><![CDATA[Backup & Disaster Recovery]]></category>
		<category><![CDATA[bit]]></category>
		<category><![CDATA[copy]]></category>
		<category><![CDATA[dd]]></category>
		<category><![CDATA[ddrescue]]></category>
		<category><![CDATA[drive]]></category>
		<category><![CDATA[fault]]></category>
		<category><![CDATA[logfile]]></category>
		<guid isPermaLink="false">http://tuttiperlinux.wordpress.com/?p=15</guid>

					<description><![CDATA[Con l&#8217;uso di fsck dovremmo aver corretto diversi problemi sui nostri dischi ma qualche volta tutto cio&#8217; non basta ed il problema potrebbe essere piu&#8217; serio ed il disco hardware potrebbe essere li li per lasciarci. Dischi morenti , con testine saltellanti, che contengono tutti i nostri preziosi dati non sono una bella cosa da vedere. Come &#8230; <a href="https://tuttiperlinux.blog/2014/06/24/copia-bit-a-bit/">Continua a leggere <span class="meta-nav">&#8594;</span></a>]]></description>
										<content:encoded><![CDATA[<p>Con l&#8217;uso di fsck dovremmo aver corretto diversi problemi sui nostri dischi ma qualche volta tutto cio&#8217; non basta ed il problema potrebbe essere piu&#8217; serio ed il disco hardware potrebbe essere li li per lasciarci.</p>
<p>Dischi morenti , con testine saltellanti, che contengono tutti i nostri preziosi dati non sono una bella cosa da vedere. Come spiegato nel primo articolo in questi casi la prima cosa da evitare e&#8217; di andare a modificare qualunque file e questo puo&#8217; intendere anche cercare di farne singole copie su di altri supporti, questo perche&#8217;ogni azione compiuta vi avvicinera&#8217; sempre di piu&#8217; al momento di <strong>fault</strong> del disco, complicando molto ogni futura azione, la cosa migliore quindi e&#8217; quella di non sottoporre ad ulteriore stress il disco e di clonarlo immediatamente effettuando una sua immagine &#8220;bit to bit&#8221; , sara&#8217; sempre possibile, con tutta calma, operare sulla copia per estrapolare e becappare i nostri preziosi dati. Normalmente per effettuare questo tipo di copie si usa il tool <strong>dd </strong>ma in questo caso, presupponendo, un imminente guasto/arresto del disco a causa di seri problemi non fara&#8217; al nostro caso poiche&#8217; &#8216;dd&#8217; e&#8217; progettato per interrompersi non appena riscontra un errore e non sarebbe di grande aiuto dovendo operare su di un disco non funzionante. Affideremo quindi questa delicata operazione al comando <strong>ddrescue</strong> che, come <strong>dd</strong> , viene utilizzato per effettuare copie &#8216;bit to bit&#8217; ma , diversamente da &#8216;dd&#8217; , e&#8217; in grado di saltare i blocchi guasti rilevati sul disco durante l&#8217;esecuzione e di copiare soltanto quelli sani.</p>
<p>Ora per poter cominciare questa importante fase ocorrera&#8217; procurarsi un supporto su cui effettuare la copia, sta a voi usare il device (sano) che avete a disposizione sia che sia un secondo disco (interno/esterno) una chiavetta USB o altro, la cosa piu&#8217; importante da verificare e&#8217; che mentre il disco su cui effettuerete la copia dovra&#8217; essere montato sul sistema, quello da &#8220;copiare&#8221; (difettoso) dovra&#8217; invece essere smontato; effettuata questa importante verifica potremo lanciare il tutto eseguendo il seguente comando (come negli articoli precedenti nel mio caso il disco primario e di root del sistema e&#8217; /dev/sdd1 quindi lo usero&#8217; come esempio) :</p>
<ul>
<li><strong>sudo ddrescue /dev/sdd1 /media/drive-di-backup/sdd1.image /media/drive-di-backup/logfile</strong></li>
</ul>
<p>questo comando effettuera&#8217; la copia della partizione <strong>sdd1 </strong>del disco guasto e la salvera&#8217; nel file  <strong>sdd1.image</strong> all&#8217;interno del disco di backup montato sotto /media/&lt;drive-di-backup&gt; , l&#8217;ultima parte si occupa invece di creare anche un file di LOG da poter leggere in caso di problemi. A questo punto tutti o gran parte dei nostri dati (dipende da quanto grave sia il guasto sul disco) saranno stati copiati e salvati sull&#8217;immagine creata; ora volendo essere pignoli potremmo chiedere ancora a ddrescue di cercare di recuperare quelle parti di blocchi/informazioni che risultano difettose tramite il seguente comando :</p>
<ul>
<li><strong>sudo ddrescue -r 3 -C</strong> <strong>/dev/sdd1 /media/drive-di-backup/sdd1.image /media/drive-di-backup/logfile</strong></li>
</ul>
<p>in pratica con l&#8217;aggiunta dell&#8217;opzione &#8221; -r 3 &#8221; diciamo a ddrescue di effettuare un numero massimo di tre tentativi di lettura di quei dati su cui ha riscontrato errori per cercare cosi di riempire ulteriormente qualche altra fetta dei nostri preziosi dati. Questa operazione causa un forte stress sul disco ecco perche&#8217; la eseguiamo soltanto dopo aver messo al riparo tutto il resto sull&#8217;immagine creata al primo giro. Sara&#8217; proprio grazie alla lettura del file di LOG che ddrescue e&#8217; in grado di riempire/aggiungere soltanto i blocchi vuoti , senza rileggere le parti gia&#8217; eseguite correttamente in precedenza.</p>
<p>Ultimo consiglio se dovete salvare piu&#8217; partizioni eseguite ddrescue piu&#8217; volte tante quante sono le partizioni per voi necessarie e create N file .image .</p>
<p>** Leggi anche ( &#8221; <a title="A volte basta poco !" href="https://tuttiperlinux.wordpress.com/2014/06/24/a-volte-basta-poco/">a volte basta poco!</a> &#8221; )</p>
]]></content:encoded>
					
					<wfw:commentRss>https://tuttiperlinux.blog/2014/06/24/copia-bit-a-bit/feed/</wfw:commentRss>
			<slash:comments>1</slash:comments>
		
		
		
		<media:content url="https://2.gravatar.com/avatar/855ab7cb725a5b56c356471b79d1cef6?s=96&#38;d=&#38;r=G" medium="image">
			<media:title type="html">lordisil72lordisil72</media:title>
		</media:content>
	</item>
		<item>
		<title>A volte basta poco !</title>
		<link>https://tuttiperlinux.blog/2014/06/24/a-volte-basta-poco/</link>
					<comments>https://tuttiperlinux.blog/2014/06/24/a-volte-basta-poco/#comments</comments>
		
		<dc:creator><![CDATA[Tutti per Linux]]></dc:creator>
		<pubDate>Tue, 24 Jun 2014 08:54:08 +0000</pubDate>
				<category><![CDATA[Backup & Disaster Recovery]]></category>
		<category><![CDATA[chroot]]></category>
		<category><![CDATA[grub]]></category>
		<category><![CDATA[livecd]]></category>
		<category><![CDATA[mount]]></category>
		<category><![CDATA[update]]></category>
		<guid isPermaLink="false">http://tuttiperlinux.wordpress.com/?p=12</guid>

					<description><![CDATA[Ovvero fare un CHROOT dentro un sistema non funzionante ! Prima di continuare la panoramica dei tool salva filesystem/files volevo aggiungere che in alcuni casi quello che ci serve e che ci puo&#8217; bastare e&#8217; gia sotto il nostro naso, li pronto per riparare il nostro Linux e si trova gia&#8217; dentro il sistema, sto &#8230; <a href="https://tuttiperlinux.blog/2014/06/24/a-volte-basta-poco/">Continua a leggere <span class="meta-nav">&#8594;</span></a>]]></description>
										<content:encoded><![CDATA[<p><strong><span style="color:#333333;"><span style="font-family:Arial, sans-serif;">Ovvero fare un CHROOT dentro un sistema non funzionante !</span></span></strong></p>
<p><span style="color:#333333;"><span style="font-family:Arial, sans-serif;">Prima di continuare la panoramica dei tool salva filesystem/files volevo aggiungere che in alcuni casi quello che ci serve e che ci puo&#8217; bastare e&#8217; gia sotto il nostro naso, li pronto per riparare il nostro Linux e si trova gia&#8217; dentro il sistema, sto parlando di </span></span><strong><span style="color:#333333;"><span style="font-family:Arial, sans-serif;">chroot. </span></span></strong><span style="color:#333333;"><span style="font-family:Arial, sans-serif;">Poniamo il caso che vi accorgiate di un mal funzionamento in cui forse avete danneggiato il boot loader (GRUB) , oppure avete cancellato per errore qualche pacchetto/libreria importante, la cui mancanza impedisce  l&#8217;avvio di Linux. In questi ed in altri casi simili si puo&#8217; provare a ricorrere proprio a &#8220;chroot&#8221; che potete trovare su qualunque distro su cui stiate lavorando o studiando; CHROOT vi dara&#8217; accesso , come utente root, ad un sistema, ad esempio, che non si avvia.</span></span></p>
<p><span style="color:#333333;"><span style="font-family:Arial, sans-serif;">Usandolo potrete fare il boot da una LiveCD e successivamente eseguire qualsiasi programma come se aveste fatto un normale boot. Per testare questa opzione avviate il vostro pc con la LiveCD, aprite un terminale e diventate l&#8217;utente root ( su &#8211; ). Poi ipotizzando che il vostro Linux, che non si avvia, sia installato su &#8221; / &#8220;eseguiamo i seguenti comandi :</span></span></p>
<ul>
<li><span style="color:#333333;"><span style="font-family:Arial, sans-serif;">con il comando </span></span><strong><span style="color:#333333;"><span style="font-family:Arial, sans-serif;">mount</span></span></strong><span style="color:#333333;"><span style="font-family:Arial, sans-serif;"> scoprite qual&#8217;e&#8217; la vostra partizione di root, la mia e&#8217; /dev/sdd1</span></span></li>
<li><span style="color:#333333;"><span style="font-family:Arial, sans-serif;">/$ mkdir /mnt/guasto</span></span></li>
<li><span style="color:#333333;"><span style="font-family:Arial, sans-serif;">/$ mount /dev/sdd1 /mnt/guasto</span></span></li>
<li><span style="color:#333333;"><span style="font-family:Arial, sans-serif;">/$ chroot /mnt/guasto</span></span></li>
</ul>
<p><span style="color:#333333;"><span style="font-family:Arial, sans-serif;">da questo momento in avanti, tutti i comandi che impartirete al sistema avranno effetto sulla vostra installazione di Linux e non sulla LiveCD, quindi anche qualunque file andrete a modificare sara&#8217; riferito al vostro sistema.</span></span></p>
<p><span style="color:#333333;"><span style="font-family:Arial, sans-serif;">A questo punto per ultimare l&#8217;esempio e riparare il boot loader potremo decidere di riconfigurare GRUB nell&#8217;MBR (Master Boot Record) eseguendo </span></span><strong><span style="color:#333333;"><span style="font-family:Arial, sans-serif;">update-grub </span></span></strong><span style="color:#333333;"><span style="font-family:Arial, sans-serif;">.</span></span></p>
<p><span style="color:#333333;"><span style="font-family:Arial, sans-serif;">Una volta ultimata questa fase per uscire dall&#8217;ambiente shell di </span></span><strong><span style="color:#333333;"><span style="font-family:Arial, sans-serif;">chroot </span></span></strong><span style="color:#333333;"><span style="font-family:Arial, sans-serif;">bastera&#8217; digitare exit, saremo quindi pronti per testare il funzionamento del boot riparato sul nostro sistema originario effettuando un reboot del PC ed estraendo il supporto che contiene la nostra LiveCD.</span></span></p>
<p>** Leggi anche ( &#8221; <a title="Linux Rescue File System" href="https://tuttiperlinux.wordpress.com/2014/06/23/linux-rescue-file-system/"><span style="text-decoration:underline;">linux rescue file system</span></a> &#8221; )</p>
]]></content:encoded>
					
					<wfw:commentRss>https://tuttiperlinux.blog/2014/06/24/a-volte-basta-poco/feed/</wfw:commentRss>
			<slash:comments>1</slash:comments>
		
		
		
		<media:content url="https://2.gravatar.com/avatar/855ab7cb725a5b56c356471b79d1cef6?s=96&#38;d=&#38;r=G" medium="image">
			<media:title type="html">lordisil72lordisil72</media:title>
		</media:content>
	</item>
		<item>
		<title>Linux Rescue File System</title>
		<link>https://tuttiperlinux.blog/2014/06/23/linux-rescue-file-system/</link>
					<comments>https://tuttiperlinux.blog/2014/06/23/linux-rescue-file-system/#comments</comments>
		
		<dc:creator><![CDATA[Tutti per Linux]]></dc:creator>
		<pubDate>Mon, 23 Jun 2014 12:43:51 +0000</pubDate>
				<category><![CDATA[Backup & Disaster Recovery]]></category>
		<category><![CDATA[ddrescue]]></category>
		<category><![CDATA[hdrecover]]></category>
		<category><![CDATA[MBR]]></category>
		<category><![CDATA[NTFS]]></category>
		<category><![CDATA[photorec]]></category>
		<category><![CDATA[sfdisk]]></category>
		<category><![CDATA[testdisk]]></category>
		<guid isPermaLink="false">http://tuttiperlinux.wordpress.com/?p=2</guid>

					<description><![CDATA[Nulla si crea, nulla si distrugge&#8230;..tutto si recupera!  Avete mai pensato che ai dischi dei vostri PC possono capitare molte cose spiacevoli:perdita inaspettata di elettricità&#8217;, campi magnetici forti&#8230;. ed i vostri dati si trasformano in ZOMBIE. Come poter uscire da questa spiacevole situazione ?. Può non sembrare, ma la probabilità di perdere dati importanti è &#8230; <a href="https://tuttiperlinux.blog/2014/06/23/linux-rescue-file-system/">Continua a leggere <span class="meta-nav">&#8594;</span></a>]]></description>
										<content:encoded><![CDATA[<blockquote><p><strong>Nulla si crea, nulla si distrugge&#8230;..tutto si recupera! </strong></p></blockquote>
<p>Avete mai pensato che ai dischi dei vostri PC possono capitare molte cose spiacevoli:perdita inaspettata di elettricità&#8217;, campi magnetici forti&#8230;. ed i vostri dati si trasformano in ZOMBIE. Come poter uscire da questa spiacevole situazione ?. Può non sembrare, ma la probabilità di perdere dati importanti è molto alta, solo per fare un esempio può verificarsi a seguito di:</p>
<ul>
<li>errori umani (es. per sbaglio “facendo pulizia” nel computer si cancella un file di troppo; oppure dopo aver editato un file al posto di scegliere “Salva con nome…” si preme “Salva” ed ecco che la versione originale del file viene persa.);</li>
<li>guasti (es. si rompe il disco rigido su cui erano memorizzati i dati, si danneggia la chiavetta USB, si riga il CD/DVD ecc.)</li>
<li>minacce informatiche (es. virus che cancella i dati del computer, virus che cifra i documenti presenti sul computer e chiede il riscatto ecc.)</li>
<li>furti (es. il ladro ruba i computer dell’ufficio/casa su cui erano memorizzate tutte i nostri dati sensibili&#8230;&#8230;!!!)</li>
<li>disastri (es. incendi, allagamenti ecc.)</li>
</ul>
<p><strong>Importante:</strong> appena scopri di aver accidentalmente cancellato o altrimenti perso dei dati, NON registrare più nulla su quel dispositivo di memoria o hard disk, correresti il rischio di sovrascrivere i dati che invece vorresti recuperare.</p>
<p>La cosa troppo spesso sottovalutata e che non importa da quanto tempo usate i computer, nonostante la vostra esperienza prima o poi capitera&#8217; a chiunque di perdere dati + o &#8211; importanti; quindi per quanto ci si pensi &#8220;infallibili&#8221; sempre meglio avere una buona schedulazone di BACKUP, che dovrebbero comprendere non solo files (musica, film, foto ecc&#8230;) ma anche importanti files<br />
di configurazione (gestione dell&#8217;interfaccia grafica, l&#8217;<strong>MBR</strong>, le regole di firewall ecc&#8230;).</p>
<p>Detto questo ci sono ancora diversi tool che possono venire in aiuto per uscire da una spiacevole situazione. Lascio perdere tool blasonati (ed a pagamento), in quanto gia&#8217; supporati da manuali/call center ed assistenze varie, per lanciarmi nell&#8217;introduzione dei sistemi OpenSource.<br />
[<strong>Nota:</strong> nessun sistema e&#8217; infallibile e puo&#8217; dare certezze assolute che sia open/free oppure a pagamento, dipende da situazione a situazione, dalle capacita&#8217; personali/esperienza e dal fattore <strong>&#8220;C&#8221;</strong>, proprio quello che muove una parte del mondo e che ci divide tra l&#8217;essere come Gastone oppure essere un Paperino].</p>
<p><strong>FSCK :</strong> il primo tool da imparare e&#8217; il sempre verde &#8216;fsck&#8217; che si trova su ogni distro Linux esistente, questo tool viene utilizzato dal sistema, ad esempio, tutte quelle volte in cui e&#8217; necessaria una verifica della consistenza del file system a causa di una chiusura non pulita del sistema, oppure per verificare eventuali problemi di &#8220;logorio&#8221; dei dischi, facendolo partire automaticamente (scan disk)<br />
ogni tot. riavvii del sistema.</p>
<p><strong>Fsck</strong> <strong>supporta</strong> i più diffusi file system come <strong>ext2 / ext3 / ext4 / fat / fat32 / ntfs</strong> e può essere utilizzato anche per ripristinare hard disk esterni / interni anche con Microsoft Windows installato.<br />
Da notare inoltre che durate il ripristino di un file system danneggiato può succedere che alcuni file o directory non possano essere ricollocate nella pozione originaria in quanto le informazioni necessarie sono andate distrutte, in questo caso fsck ci consente di collocare i vari file e directory in una cartella dedicata situata nella radice del file system ripristinato in modo tale da poter essere ricollocati manualmente nelle directory originarie o possono essere rimossi definitivamente.</p>
<p><strong>Per utilizzare fsck</strong> nella correzione di un file system/partizione e&#8217; d&#8217;obbligo non agire sulla suddetta mentre questa e&#8217; montata, sara&#8217; quindi necessario <strong>utilizzare una</strong> <strong>LiveCD</strong> su un qualunque supporto esterno preferiate, se invece il disco / partizione da ripristinare è esterna al sistema operativo potremo operare dalla nostra distribuzione preoccupandoci soltanto di smontare la partizione in questione prima di agire con i comandi.</p>
<p>La prima cosa da fare è verificare come viene rilevato il disco o partizione da ripristinare dal nostro sistema operativo. Per verificarlo basta digitare da terminale:<br />
<strong>sudo fdisk -l</strong><br />
con questo comando averemo l&#8217;elenco dei dischi e partizioni presenti / collegati nel nostro sistema, nell&#8217;esempio la partizione da ripristinare sara&#8217; <strong>/dev/sdb1</strong></p>
<p>A questo punto avviamo fsck da root seguito dal disco da rilevare /dev/sdb1 digitiamo<br />
<strong>sudo fsck -A -r -s /dev/sdb1</strong></p>
<p>&#8230;se volete che la procedura vada avanti in modo automatico e&#8217; possibile aggiungere l&#8217;opzione<strong> -y</strong><br />
tenendo pero&#8217; presente che l&#8217;intervento automatico di fsck potrebbe rendere irrecuperabili dei dati.</p>
<p><strong>**Nota:</strong> fsck e&#8217; un tool ricco di funzionalita&#8217; avanzate per cui rimando, per la personalizzazione<br />
del comando, alla lettura della man page sul sistema oppure alle guide online presenti sui portali<br />
delle maggiori distribuzioni Linux.</p>
<p>Uno dei problemi piu&#8217; comuni che potrebbero bloccare la scansione di fsck sono i <strong>superblocchi corrotti </strong>e visto che un filesystem non puo&#8217; essere utilizzato senza un superblocco in salute esistono diverse sue copie di sicurezza disseminate in diverse posizioni del disco. Bastera&#8217; digitare <strong>sudo</strong> <strong>mke2fs -n /dev/sdb1 </strong>per trovare dove sono stati salvati i superblocchi.</p>
<p><strong>**Nota: attenzione a non dimenticare l&#8217;opzione -n senza la quale spazzereste via la vostra partizione.</strong></p>
<p>Esempio: $ <strong>sudo mke2fs /dev/sdb1</strong><br />
Superblocks backups stored on blocks:<br />
<strong>32768</strong>,98304,163840,229376 ecc&#8230;..</p>
<p>Ora potremo usare uno di questi blocchi per rimpiazzare quello indicato come corrotto durante lo scan disk con fsck, nel seguente modo :</p>
<p>es.-&gt; $ <strong>sudo e2fsck -b 32768 /dev/sdb1</strong> (dove 32768 e&#8217; il primo superblocco disponibile indicato sopra)</p>
<p>Se il filesystem dovesse essere una partizione <strong>NTFS</strong> si puo&#8217; provare ad utilizzare l&#8217;utility <strong>ntfsifx</strong>, sempre assicurandosi che la partizione in questione non sia montata, dopodiche (seguendo il nostro esempio) bastera&#8217; digitare:<br />
$ <strong>ntfsfix /dev/sdb1</strong></p>
<p>Terminate le attività&#8217; descritte saremo pronti ad effettuare un nuovo riavvio; nel caso in cui tutto ciò&#8217; non abbia funzionato, le operazioni ed i tool ancora da scoprire e provare sono diversi e verranno trattati nei prossimi articoli in cui verranno analizzati tool quali :</p>
<ul>
<li>hdrecover</li>
<li>photorec</li>
<li>ddrescue</li>
<li>foremost / scalpel</li>
<li>testdisk</li>
<li>sfdisk</li>
</ul>
]]></content:encoded>
					
					<wfw:commentRss>https://tuttiperlinux.blog/2014/06/23/linux-rescue-file-system/feed/</wfw:commentRss>
			<slash:comments>2</slash:comments>
		
		
		
		<media:content url="https://2.gravatar.com/avatar/855ab7cb725a5b56c356471b79d1cef6?s=96&#38;d=&#38;r=G" medium="image">
			<media:title type="html">lordisil72lordisil72</media:title>
		</media:content>
	</item>
	</channel>
</rss>
